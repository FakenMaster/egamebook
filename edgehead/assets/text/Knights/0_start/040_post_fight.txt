// ---
APPROACH: $start_post_fight FROM $start_begin_fight
COMMAND: <implicit>
DESCRIPTION: N/A

// ---
ROOM: $start_post_fight

FIRST_DESCRIPTION:

[[CODE]]
throw StateError("Tamara's state wasn't planned for: ${w.getActorById(tamaraId)}");
[[/CODE]]

// ---
ROOM: $start_post_fight_tamara_alive

VARIANT_OF: $start_post_fight

RULE: !w.wasKilled(tamaraId)

FLAGS: idle

FIRST_DESCRIPTION:
The fight is over.

[[CODE]]
assert(!originalWorld.wasKilled(tamaraId));
[[/CODE]]

- RULESET
- RULE:
  playerHasVisited(sim, w, "start_raccoon")
- THEN:
"Raccoon my ass."

- END RULE
- RULE:
  default
- THEN:
"Well, as I said, that was the last one. And, young sir, call me coward one more time and I'll slash your neck." She seems to mean it.

- END RULE
- END RULESET

"Look, kid, I understand how hard it must have been to leave your comfortable life behind, and come to this scary place all by yourself. And I respect you for that strength of will. But it's time for you to quit. Go back to safety. You won't survive here."

"Thanks for your service, Tamara. But I've come this far."

Tamara nods, and leaves without ceremony. In a few moments, she disappears among the trees and the bushes.

[[CODE]]
w.updateActorById(tamaraId, (b) => b.isActive = false);
[[/CODE]]


// ---
ROOM: $start_post_fight_tamara_dead

VARIANT_OF: $start_post_fight

RULE: w.wasKilled(tamaraId) && !w.getActorById(tamaraId).isAnimated

FLAGS: idle

FIRST_DESCRIPTION:
"Sorry, Tamara." I kneel next to her and put her in the position of a proper warrior death, with back to the ground and arms crossed over the body.

// ---
ROOM: $start_post_fight_tamara_animated

VARIANT_OF: $start_post_fight

RULE: w.wasKilled(tamaraId) && w.getActorById(tamaraId).anatomy.isUndead

FLAGS: idle

FIRST_DESCRIPTION:
I look into Tamara's undead eyes.

"I'm sorry."

She doesn't respond, so I nod, and tell her to follow me.

