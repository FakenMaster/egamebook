self.$dart_deferred_initializers$=self.$dart_deferred_initializers$||Object.create(null)
$dart_deferred_initializers$.current=function($globals$,$){var A=$globals$.A
var B=$globals$.B
var C=$globals$.C
var D=$globals$.D
var E=$globals$.E
var F=$globals$.F
var G=$globals$.G
var H=$globals$.H
var J=$globals$.J
var K=$globals$.K
var L=$globals$.L
var M=$globals$.M
var N=$globals$.N
var O=$globals$.O
var P=$globals$.P
var Q=$globals$.Q
var R=$globals$.R
var S=$globals$.S
var T=$globals$.T
var U=$globals$.U
var V=$globals$.V
var W=$globals$.W
var X=$globals$.X
var Y=$globals$.Y
var Z=$globals$.Z
var init=$globals$.init
var setupProgram=$globals$.setupProgram
var I=$globals$.I
var dart=[["","",,P,{"^":"",
cK:function(a,b,c){var z,y,x
if(b===0){if(c.geI())J.jM(c.c)
else J.dZ(c.a)
return}else if(b===1){if(c.geI())c.c.eA(H.F(a),H.Q(a))
else{z=H.F(a)
y=H.Q(a)
c.a.cA(z,y)
J.dZ(c.a)}return}if(a instanceof P.c4){if(c.geI()){b.$2(2,null)
return}z=a.b
if(z===0){z=a.a
J.fC(c.a,z)
P.cT(new P.tr(b,c))
return}else if(z===1){x=a.a
c.a.hf(x,!1).a3(new P.ts(b,c))
return}}P.j4(a,b)},
tV:function(a){return J.fI(a)},
tr:{"^":"a:1;a,b",
$0:function(){var z=this.b
if(z.a.gbl()){z.b=!0
return}this.a.$2(null,0)}},
ts:{"^":"a:0;a,b",
$1:function(a){var z=this.b.c!=null?2:0
this.a.$2(z,null)}},
qX:{"^":"c;a,b,c",
gck:function(a){return J.fI(this.a)},
gbl:function(){return this.a.gbl()},
geI:function(){return this.c!=null},
l:function(a,b){return J.fC(this.a,b)},
cA:function(a,b){return this.a.cA(a,b)},
aN:function(a){return J.dZ(this.a)},
iD:function(a){var z=new P.r_(a)
this.a=P.im(new P.r1(this,a),new P.r2(z),null,new P.r3(this,z),!1,null)},
p:{
qY:function(a){var z=new P.qX(null,!1,null)
z.iD(a)
return z}}},
r_:{"^":"a:1;a",
$0:function(){P.cT(new P.r0(this.a))}},
r0:{"^":"a:1;a",
$0:function(){this.a.$2(0,null)}},
r2:{"^":"a:1;a",
$0:function(){this.a.$0()}},
r3:{"^":"a:1;a,b",
$0:function(){var z=this.a
if(z.b===!0){z.b=!1
this.b.$0()}}},
r1:{"^":"a:1;a,b",
$0:function(){var z=this.a
if(!z.a.ghy()){z.c=new P.aZ(new P.x(0,$.i,null,[null]),[null])
if(z.b===!0){z.b=!1
P.cT(new P.qZ(this.b))}return z.c.ght()}}},
qZ:{"^":"a:1;a",
$0:function(){this.a.$2(2,null)}},
c4:{"^":"c;al:a>,b",
j:function(a){return"IterationMarker("+this.b+", "+H.b(this.a)+")"},
p:{
dD:function(a){return new P.c4(a,1)},
bD:function(){return C.aM},
iX:function(a){return new P.c4(a,0)},
bE:function(a){return new P.c4(a,3)}}},
c6:{"^":"c;a,b,c,d",
gC:function(){var z=this.c
return z==null?this.b:z.gC()},
n:function(){var z,y,x,w
for(;!0;){z=this.c
if(z!=null)if(z.n()===!0)return!0
else this.c=null
y=function(a,b,c){var v,u=b
while(true)try{return a(u,v)}catch(t){v=t
u=c}}(this.a,0,1)
if(y instanceof P.c4){x=y.b
if(x===2){z=this.d
if(z==null||z.length===0){this.b=null
return!1}if(0>=z.length)return H.e(z,-1)
this.a=z.pop()
continue}else{z=y.a
if(x===3)throw z
else{w=J.as(z)
if(w instanceof P.c6){z=this.d
if(z==null){z=[]
this.d=z}z.push(this.a)
this.a=w.a
continue}else{this.c=w
continue}}}}else{this.b=y
return!0}}return!1}},
ti:{"^":"da;a",
gJ:function(a){return new P.c6(this.a(),null,null,null)},
$asda:I.a0,
$asI:I.a0,
p:{
bG:function(a){return new P.ti(a)}}}}],["","",,P,{"^":"",tn:{"^":"c;$ti",
k:function(a,b,c){throw H.d(new P.D("Cannot modify unmodifiable map"))},
D:function(a,b){throw H.d(new P.D("Cannot modify unmodifiable map"))},
$isK:1,
$asK:null},nJ:{"^":"c;$ti",
h:function(a,b){return this.a.h(0,b)},
k:function(a,b,c){this.a.k(0,b,c)},
L:function(a,b){return this.a.L(0,b)},
A:function(a,b){this.a.A(0,b)},
gE:function(a){var z=this.a
return z.gE(z)},
gX:function(a){var z=this.a
return z.gX(z)},
gi:function(a){var z=this.a
return z.gi(z)},
D:function(a,b){return this.a.D(0,b)},
j:function(a){return this.a.j(0)},
$isK:1,
$asK:null},qw:{"^":"nJ+tn;a,$ti",$asK:null,$isK:1}}],["","",,P,{"^":"",
eC:function(a){return C.X},
rC:{"^":"c;",
aA:function(a){if(a<=0||a>4294967296)throw H.d(P.ow("max must be in range 0 < max \u2264 2^32, was "+a))
return Math.random()*a>>>0},
hD:function(){return Math.random()}}}],["","",,S,{"^":"",e8:{"^":"c;fR:a<,b,$ti",
aw:function(a){var z=new S.aX(null,null,this.$ti)
z.aD()
z.ak(0,this)
a.$1(z)
return z.B()},
gq:function(a){var z=this.b
if(z==null){z=X.am(this.a)
this.b=z}return z},
v:function(a,b){var z,y,x,w,v
if(b==null)return!1
if(b===this)return!0
z=J.k(b)
if(!z.$ise8)return!1
y=b.a
x=this.a
if(y.length!==x.length)return!1
z=z.gq(b)
w=this.gq(this)
if(z==null?w!=null:z!==w)return!1
for(v=0;z=x.length,v!==z;++v){if(v>=y.length)return H.e(y,v)
w=y[v]
if(v>=z)return H.e(x,v)
if(!J.f(w,x[v]))return!1}return!0},
j:function(a){return J.v(this.a)},
h:function(a,b){var z=this.a
if(b>>>0!==b||b>=z.length)return H.e(z,b)
return z[b]},
gi:function(a){return this.a.length},
bE:function(a,b,c){var z=this.a
return(z&&C.a).bE(z,b,c)},
aS:function(a,b){return this.bE(a,b,0)},
gJ:function(a){var z=this.a
return new J.bh(z,z.length,0,null,[H.l(z,0)])},
b7:function(a,b){var z=this.a
z.toString
return new H.ap(z,b,[null,null])},
F:function(a,b){var z=this.a
return(z&&C.a).F(z,b)},
A:function(a,b){var z=this.a
return(z&&C.a).A(z,b)},
gE:function(a){return this.a.length===0},
gX:function(a){return this.a.length!==0},
gO:function(a){var z=this.a
return(z&&C.a).gO(z)},
gw:function(a){var z=this.a
return(z&&C.a).gw(z)},
R:function(a,b){var z=this.a
if(b>>>0!==b||b>=z.length)return H.e(z,b)
return z[b]},
aD:function(){if(new H.aG(H.b1(H.l(this,0)),null).v(0,C.o))throw H.d(new P.D('explicit element type required, for example "new BuiltList<int>"'))}},aX:{"^":"c;fR:a<,b,$ti",
B:function(){var z,y
z=this.b
if(z==null){z=this.a
y=new S.e8(z,null,this.$ti)
y.aD()
this.a=z
this.b=y
z=y}return z},
ak:function(a,b){if(H.fl(b,"$ise8",this.$ti,null)){this.a=b.gfR()
this.b=b}else{this.a=P.ac(b,!0,H.l(this,0))
this.b=null}},
k:function(a,b,c){var z
if(c==null)H.n(P.X("null element"))
z=this.geq()
if(b>>>0!==b||b>=z.length)return H.e(z,b)
z[b]=c},
l:function(a,b){var z
if(b==null)H.n(P.X("null element"))
z=this.geq();(z&&C.a).l(z,b)},
D:function(a,b){var z=this.geq();(z&&C.a).D(z,b)},
b7:function(a,b){var z=this.a
z.toString
z=new H.ap(z,b,[null,null]).aV(0,!0)
this.a=z
this.b=null
this.iO(z)},
geq:function(){if(this.b!=null){this.a=P.ac(this.a,!0,H.l(this,0))
this.b=null}return this.a},
aD:function(){if(new H.aG(H.b1(H.l(this,0)),null).v(0,C.o))throw H.d(new P.D('explicit element type required, for example "new ListBuilder<int>"'))},
iO:function(a){var z,y,x,w
for(z=a.length,y=H.l(this,0),x=0;x<a.length;a.length===z||(0,H.a8)(a),++x){w=a[x]
if(!H.fm(w,y))throw H.d(P.X("invalid element: "+H.b(w)))}}}}],["","",,A,{"^":"",d1:{"^":"c;ja:a<,b,c,d,$ti",
aw:function(a){var z=new A.eu(null,null,this.$ti)
z.cs()
z.ak(0,this)
a.$1(z)
return z.B()},
gq:function(a){var z=this.b
if(z==null){z=this.a
z=z.gT(z)
z=H.bx(z,new A.kW(this),H.E(z,"I",0),null)
z=P.ac(z,!1,H.E(z,"I",0))
C.a.i8(z)
z=X.am(z)
this.b=z}return z},
v:function(a,b){var z,y,x,w,v
if(b==null)return!1
if(b===this)return!0
z=J.k(b)
if(!z.$isd1)return!1
y=b.a
x=this.a
if(y.gi(y)!==x.gi(x))return!1
z=z.gq(b)
w=this.gq(this)
if(z==null?w!=null:z!==w)return!1
for(z=this.gT(this),z=z.gJ(z);z.n();){v=z.gC()
if(!J.f(y.h(0,v),x.h(0,v)))return!1}return!0},
j:function(a){return J.v(this.a)},
h:function(a,b){return this.a.h(0,b)},
A:function(a,b){this.a.A(0,b)},
gE:function(a){var z=this.a
return z.gE(z)},
gX:function(a){var z=this.a
return z.gX(z)},
gT:function(a){var z=this.c
if(z==null){z=this.a
z=z.gT(z)
this.c=z}return z},
gi:function(a){var z=this.a
return z.gi(z)},
cs:function(){if(new H.aG(H.b1(H.l(this,0)),null).v(0,C.o))throw H.d(new P.D('explicit key type required, for example "new BuiltMap<int, int>"'))
if(new H.aG(H.b1(H.l(this,1)),null).v(0,C.o))throw H.d(new P.D('explicit value type required, for example "new BuiltMap<int, int>"'))}},kW:{"^":"a:0;a",
$1:function(a){var z,y
z=J.w(a)
y=J.w(this.a.a.h(0,a))
return X.c7(X.aH(X.aH(0,J.w(z)),J.w(y)))}},eu:{"^":"c;a,b,$ti",
B:function(){var z=this.b
if(z==null){z=new A.d1(this.a,null,null,null,this.$ti)
z.cs()
this.b=z}return z},
ak:function(a,b){var z
if(H.fl(b,"$isd1",this.$ti,null)){this.b=b
this.a=b.gja()}else if(!!b.$isd1){z=P.er(b.a,H.l(this,0),H.l(this,1))
this.b=null
this.a=z}else if(!!b.$isK){z=P.er(b,H.l(this,0),H.l(this,1))
this.b=null
this.a=z}else throw H.d(P.X("expected Map or BuiltMap, got "+H.b(b.ga1(b))))},
k:function(a,b,c){if(b==null)H.n(P.X("null key"))
if(c==null)H.n(P.X("null value"))
this.gh4().k(0,b,c)},
D:function(a,b){this.gh4().D(0,b)},
gh4:function(){if(this.b!=null){this.a=P.er(this.a,H.l(this,0),H.l(this,1))
this.b=null}return this.a},
cs:function(){if(new H.aG(H.b1(H.l(this,0)),null).v(0,C.o))throw H.d(new P.D('explicit key type required, for example "new MapBuilder<int, int>"'))
if(new H.aG(H.b1(H.l(this,1)),null).v(0,C.o))throw H.d(new P.D('explicit value type required, for example "new MapBuilder<int, int>"'))}}}],["","",,Y,{"^":"",
y:function(a,b){if(typeof b!=="number")return H.o(b)
a=536870911&a+b
a=536870911&a+((524287&a)<<10)
return a^a>>>6},
aR:function(a){a=536870911&a+((67108863&a)<<3)
a^=a>>>11
return 536870911&a+((16383&a)<<15)}}],["","",,M,{"^":"",bT:{"^":"c;$ti",
h:function(a,b){var z
if(!this.d0(b))return
z=this.c.h(0,this.a.$1(H.fy(b,H.E(this,"bT",1))))
return z==null?null:J.cW(z)},
k:function(a,b,c){if(!this.d0(b))return
this.c.k(0,this.a.$1(b),new B.hW(b,c,[null,null]))},
L:function(a,b){if(!this.d0(b))return!1
return this.c.L(0,this.a.$1(H.fy(b,H.E(this,"bT",1))))},
A:function(a,b){this.c.A(0,new M.kX(b))},
gE:function(a){var z=this.c
return z.gE(z)},
gX:function(a){var z=this.c
return z.gX(z)},
gT:function(a){var z=this.c
z=z.gaC(z)
return H.bx(z,new M.kY(),H.E(z,"I",0),null)},
gi:function(a){var z=this.c
return z.gi(z)},
D:function(a,b){var z
if(!this.d0(b))return
z=this.c.D(0,this.a.$1(H.fy(b,H.E(this,"bT",1))))
return z==null?null:J.cW(z)},
gaC:function(a){var z=this.c
z=z.gaC(z)
return H.bx(z,new M.kZ(),H.E(z,"I",0),null)},
j:function(a){return P.dd(this)},
d0:function(a){var z
if(a==null||H.fm(a,H.E(this,"bT",1)))z=this.b.$1(a)===!0
else z=!1
return z},
$isK:1,
$asK:function(a,b,c){return[b,c]}},kX:{"^":"a:3;a",
$2:function(a,b){var z=J.aA(b)
return this.a.$2(z.gO(b),z.gw(b))}},kY:{"^":"a:0;",
$1:function(a){return J.fF(a)}},kZ:{"^":"a:0;",
$1:function(a){return J.cW(a)}}}],["","",,B,{"^":"",hW:{"^":"c;O:a>,w:b>,$ti"}}],["","",,N,{"^":"",oV:{"^":"oT;Q,ch,a,b,c,d,e,f,r,x,y,z",
kg:function(){this.ch=H.cc($.$get$ce().h(0,"game"),"$isha")},
kx:function(){this.ch=null
var z=$.$get$cb()
z=new O.ha(N.bY("EdgeheadGame"),null,null,null,null,null,null,null,null,null,new Y.bm(H.u([],[Y.aK]),0,P.aj()),O.vg(),O.vf(),O.ve(),z,new P.b9(""),!1,null)
z.dP()
this.ch=z
z.r="endGame"},
hG:function(){$.$get$ce().k(0,"game",this.ch)},
iz:function(){var z,y
z=new O.dq(["You and Briana sprint through the giant worm\u2019s tunnel.","Suddenly, an **orc** and a **goblin** jump in front of you from a slimy crevice, swords in hands.","![Orc and Goblin](img/orc_and_goblin_sketch.jpg)",[null,P.aW(["goto","gameLoop"])]],0,null,!1,!1)
y=this.a.a
y.k(0,"start",z)
z.a="start"
z=new O.dq([new N.oX(this),[null,P.aW(["goto","gameLoop"])]],0,null,!1,!1)
y.k(0,"gameLoop",z)
z.a="gameLoop"
z=new O.dq(['<p class="meta">\n  Hit <strong>Restart</strong> (top left) to play again. It will be different.\n</p>'],0,null,!1,!1)
y.k(0,"endGame",z)
z.a="endGame"
this.b=y.h(0,"start")},
p:{
oW:function(){var z,y
z=P.h
y=new H.a_(0,null,null,null,null,null,0,[z,O.dq])
z=new N.oV("net.filiph.edgehead.0.0.1",null,new O.oY(y),null,null,null,P.J(null,null,null,z),!1,null,-9999,null,null)
z.iz()
return z}}},oX:{"^":"a:38;a",
$0:function(){var z=0,y=new P.aU(),x=1,w,v=this
var $async$$0=P.aP(function(a,b){if(a===1){w=b
z=x}while(true)switch(z){case 0:z=2
return P.B(v.a.ch.bc(),$async$$0,y)
case 2:return P.B(null,0,y)
case 1:return P.B(w,1,y)}})
return P.B(null,$async$$0,y)}}}],["","",,O,{"^":"",
y1:[function(a,b){var z,y
z=b.gjA()
z=new H.Z(z,new O.u3(a),[H.l(z,0)]).au(0,0,new O.u4())
if(typeof z!=="number")return H.o(z)
y=b.a
y=new H.Z(y,new O.u5(a),[H.l(y,0)]).au(0,0,new O.u6())
if(typeof y!=="number")return H.o(y)
return 0+z-y},"$2","jp",4,0,5],
u3:{"^":"a:0;a",
$1:function(a){return J.f(a.gag(),this.a.gag())}},
u4:{"^":"a:3;",
$2:function(a,b){return J.R(a,b.gaR())}},
u5:{"^":"a:0;a",
$1:function(a){return a.cd(this.a)}},
u6:{"^":"a:3;",
$2:function(a,b){return J.R(a,b.gaR())}},
ha:{"^":"nI;x,y,z,Q,ch,cx,cy,db,bL:dx<,dy,fm:fr<,a,b,c,d,e,f,r",
dP:function(){var z,y,x,w,v,u
z=[P.h]
y=H.u([],z)
x=P.J(null,null,null,null)
w=$.$get$dU()
x=new R.cI(null,!0,y,null,null,C.c,1,null,100,!0,!1,x,null,null,!0,C.l,null,w,null)
new O.lI().$1(x)
this.Q=x.B()
y=new R.cI(null,!0,H.u([],z),null,null,C.c,1,null,100,!0,!1,P.J(null,null,null,null),null,null,!0,C.l,null,w,null)
new O.lJ().$1(y)
this.ch=y.B()
y=new K.cC(null,"characterSetup","You are about to make a choice of your character!","",null,null)
x=[Q.bu]
v=new S.aX(null,null,x)
v.aD()
v.ak(0,[new Q.bu("tunnel","Run towards freedom",null)])
y.a=v.B()
this.cx=y
y=$.$get$fp()
v=y.b
u=new K.cC(null,"tunnel","You run and see a goblin and an orc.","",new O.lK(this),null)
x=new S.aX(null,null,x)
x.aD()
x.ak(0,[new Q.bu(v,"End book",null)])
u.a=x.B()
this.cy=u
u=new R.cI(null,!0,H.u([],z),null,null,C.c,1,null,100,!0,!1,P.J(null,null,null,null),null,null,!0,C.l,null,w,null)
new O.lL(this).$1(u)
this.y=u.B()
z=new R.cI(null,!0,H.u([],z),null,null,C.c,1,null,100,!0,!1,P.J(null,null,null,null),null,null,!0,C.l,null,w,null)
new O.lM(this).$1(z)
this.z=z.B()
z=F.oF(this.cx)
this.db=z
x=this.y
w=this.z
v=this.cx
u=this.cy
w=P.aD([x,w],R.a5)
x=P.J(null,null,null,O.cj)
z=new A.ba(w,P.J(null,null,null,U.d8),x,P.aD([v,u,y],K.cC),P.ac([z],!0,S.b8),0)
this.dx=z
y=new Y.bm(H.u([],[Y.aK]),0,P.aj())
x=new B.cx(z,null,y,1,1,!0,!1,!1,0)
x.fo(z,null,null,y,1,!1,!0,!1)
this.dy=x},
dE:function(){var z=0,y=new P.aU(),x,w=2,v,u=this,t,s,r,q,p,o,n,m,l,k,j,i,h,g,f
var $async$dE=P.aP(function(a,b){if(a===1){v=b
z=w}while(true)switch(z){case 0:t=u.x
t.kv("update() for world at time "+H.b(u.dx.f))
s=u.dx.e
if(s.length===0){u.f=!0
t=u.fr
t.bh(0,"\n\n",!0)
if(u.dx.hw(u.y.r)){r=u.dx.a9(u.y.r)
t.ew(0,"<subject> look<s> behind",r)
t.ew(0,"<subject> see<s> the giant worm's hideous head approaching",r)
if(u.dx.hw(u.z.r))t.bh(0,"You both start sprinting again.",!0)
else{t.ew(0,"<subject> take<s> a last look at Briana",r)
t.jE(0,"<subject> start<s> sprinting again, alone",!0,r)}t.bh(0,"\n\n",!0)
t.bh(0,"TO BE CONTINUED.",!0)}else t.bh(0,"You will soon be the giant worm's food.",!0)
u.e.a+=t.dv()
z=1
break}q=C.a.gw(s)
p=q.dJ(u.dx)
s=u.dx
o=N.bY("ActorPlanner")
n=new H.a_(0,null,null,null,null,null,0,[null,null])
m=J.q(p)
l=m.gt(p)
k=new Y.bm(H.u([],[Y.aK]),0,P.aj())
k.b=s.f
j=new G.kn(o,l,new B.cx(s,null,k,1,1,!0,!1,!1,0),0,!1,n)
z=3
return P.B(j.kX(R.tX()),$async$dE,y)
case 3:if(n.gE(n)){o.hS("There are no actions available for actorId="+H.b(l)+".")
l="Actions not available for "+H.b(l)+" and "
k=J.k(s)
s="PlanConsequence<"+k.gq(s)+", "+k.j(s)+", "+C.u.j(null)
s+", 1, 0, "
o.dm(l+(s+", 1, 0, >")+".")}i=G.oe(n)
s=i.b
if(s.length===0){t.i5("No recommendation for "+H.b(m.gm(p)))
u.dx.hp(q.gt(q))
t=u.dx
s=t.f
if(typeof s!=="number"){x=s.G()
z=1
break}t.f=s+1
z=1
break}if(p.gS()){if(s.length===1){u.dY(C.a.gah(s),p,u.fr)
z=1
break}o=u.fr
u.e.a+=o.dv()
C.a.si(o.a,0)
t.dm("planner.generateTable for "+H.b(m.gm(p)))
j.fb().A(0,new O.lN(u))
h=P.ac(new H.q8(s,0,4,[H.l(s,0)]),!0,null)
t=new O.lO()
s=h.length-1
if(s-0<=32)H.ig(h,0,s,t)
else H.ie(h,0,s,t)
for(t=h.length,s=u.c,g=0;g<h.length;h.length===t||(0,H.a8)(h),++g){f=h[g]
s.$3$helpMessage$script(J.C(f),f.gZ(),new O.lP(u,p,f))}z=1
break}else{t=S.ou(i.a,1000)
if(t>=s.length){x=H.e(s,t)
z=1
break}o=u.fr
u.dY(s[t],p,o)}if(o.geE()){u.e.a+=o.hI(!0)
o.l2()}case 1:return P.B(x,0,y)
case 2:return P.B(v,1,y)}})
return P.B(null,$async$dE,y)},
dY:function(a,b,c){var z,y,x
z=a.dd(b,this.dy,this.dx)
y=P.ac(z,!0,H.E(z,"I",0))
x=S.ot(new H.ap(y,new O.lH(),[null,null]),1)
if(x>=y.length)return H.e(y,x)
z=y[x]
this.dy=z
C.a.K(c.a,z.gfm().a)
this.dx=this.dy.gbL()}},
lI:{"^":"a:0;",
$1:function(a){var z
a.gu()
a.r=1000
a.gu()
a.ch="orc"
a.gu()
a.cy=!1
a.gu()
a.db=C.H
z=$.$get$bf()
a.gu()
a.c=new U.ds(!1,10,!0,z,"sword",C.h)
a.gu()
a.f=2
z=$.$get$fo()
a.gu()
a.dy=z
a.gu()
a.fr=O.jp()
return a}},
lJ:{"^":"a:0;",
$1:function(a){var z
a.gu()
a.r=1001
a.gu()
a.ch="goblin"
a.gu()
a.cy=!1
a.gu()
a.db=C.H
z=$.$get$bf()
a.gu()
a.c=new U.ds(!1,10,!0,z,"scimitar",C.h)
z=$.$get$fo()
a.gu()
a.dy=z
a.gu()
a.fr=O.jp()
return a}},
lK:{"^":"a:0;a",
$1:function(a){var z=this.a
return[z.Q,z.ch]}},
lL:{"^":"a:0;a",
$1:function(a){var z
a.gu()
a.r=1
a.gu()
a.z=!0
a.gu()
a.db=C.I
a.gu()
a.ch="Filip"
z=$.$get$bf()
a.gu()
a.c=new U.ds(!1,10,!0,z,"sword",C.h)
a.gu()
a.f=2
a.gu()
a.x=1000
z=this.a.cx.b
a.gu()
a.cx=z
return a}},
lM:{"^":"a:0;a",
$1:function(a){var z,y
a.gu()
a.r=100
a.gu()
a.db=C.ar
a.gu()
a.ch="Briana"
z=$.$get$bf()
a.gu()
a.c=new U.ds(!1,10,!0,z,"longsword",C.h)
a.gu()
a.f=2
z=this.a
y=z.cx.b
a.gu()
a.cx=y
z=z.y.r
a.gu()
a.dx=z
return a}},
lN:{"^":"a:0;a",
$1:function(a){return this.a.x.dm(a)}},
lO:{"^":"a:3;",
$2:function(a,b){return J.bM(J.C(a),J.C(b))}},
lP:{"^":"a:1;a,b,c",
$0:function(){var z=this.a
z.dY(this.c,this.b,z.fr)}},
lH:{"^":"a:0;",
$1:function(a){return a.gkZ()}}}],["","",,Q,{"^":"",
jr:function(a,b,c){return new P.bG(function(){var z=a,y=b,x=c
var w=0,v=1,u,t,s,r
return function $async$jr(d,e){if(d===1){u=e
w=v}while(true)switch(w){case 0:t=y.e
t=t.length!==0?C.a.gw(t):null
s=J.kf(t.br(y.a,y),new Q.uF(z))
t=J.as(s.a),r=new H.eU(t,s.b,[H.l(s,0)])
case 2:if(!r.n()){w=3
break}w=4
return x.$1(t.gC())
case 4:w=2
break
case 3:return P.bD()
case 1:return P.bE(u)}}})},
js:function(a,b,c){return new P.bG(function(){var z=a,y=b,x=c
var w=0,v=1,u,t
return function $async$js(d,e){if(d===1){u=e
w=v}while(true)switch(w){case 0:t=y.e
t=y.fe((t.length!==0?C.a.gw(t):null).gb6()).gke().a,t=new J.bh(t,t.length,0,null,[H.l(t,0)])
case 2:if(!t.n()){w=3
break}w=4
return x.$1(t.d)
case 4:w=2
break
case 3:return P.bD()
case 1:return P.bE(u)}}})},
uF:{"^":"a:0;a",
$1:function(a){var z,y
if(a.gbk()){z=a.gag()
y=this.a.gag()
z=z.a
y=y.a
y=z==null?y!=null:z!==y
z=y}else z=!1
return z}},
bg:{"^":"c;",
dd:function(a,b,c){var z=this
return new P.bG(function(){var y=a,x=b,w=c
var v=0,u=1,t,s,r
return function $async$dd(d,e){if(d===1){t=e
v=u}while(true)switch(v){case 0:s=z.a4(y,x.gbL())
v=s>0?2:3
break
case 2:r=A.iM(w)
v=4
return B.hX(r,x,z,z.iK(r,y,w,z.ga7(),!0),s,!1,!1,!0)
case 4:case 3:v=s<1?5:6
break
case 5:r=A.iM(w)
v=7
return B.hX(r,x,z,z.iJ(r,y,w,z.ga6(),!0),1-s,!0,!1,!1)
case 7:case 6:return P.bD()
case 1:return P.bE(t)}}})},
ft:function(a,b,c,d,e,f){var z,y,x,w,v,u,t
z=a.a.bs(0,new Q.ki(b))
y=new O.kg(null,null,null,null,null,null,null,null,null,C.B,null)
y.e=new H.aG(H.cS(this),null).j(0)
y.d=this.gm(this)
y.Q=b
y.c=P.aD(!!this.$isag?[this.b]:[],null)
y.f=f
y.r=e
y.kM(c)
x=new Y.bm(H.u([],[Y.aK]),0,P.aj())
w=a.e
v=J.M(w.length!==0?C.a.gw(w):null)
u=a.gq(a);(w.length!==0?C.a.gw(w):null).hF(a,x)
if(a.gq(a)!==u)throw H.d(new P.z("Please don't change the world in onBeforeAction"))
this.a=d.$3(z,a,x)
if(a.eb(v)!=null)a.hp(v)
t=a.f
if(typeof t!=="number")return t.G()
a.f=t+1
t=a.hW(v)
if(!(t==null))t.hE(a,x)
while(!0){t=w.length!==0?C.a.gw(w):null
if((t==null?t:t.dJ(a))!=null){t=w.length!==0?C.a.gw(w):null
t=!J.f(t==null?t:t.dQ(a),!0)}else t=!0
if(!t)break
if((w.length!==0?C.a.gw(w):null)==null)break
C.a.eY(w)}if(this.a==null)H.n(new P.z("No description given when executing "+this.j(0)+". You should return it from your world-modifying function."))
y.b=a
y.y=this.a
y.x=a.f
a.c.l(0,y.B())
return x},
iK:function(a,b,c,d,e){return this.ft(a,b,c,d,!1,e)},
iJ:function(a,b,c,d,e){return this.ft(a,b,c,d,e,!1)}},
ki:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),J.M(this.a))}},
ag:{"^":"bg;",
gm:function(a){var z=new Y.bm(H.u([],[Y.aK]),0,P.aj())
z.jD(0,this.gav(),this.b)
return z.dv()},
j:function(a){var z,y
z=this.b
y=J.q(z)
return"EnemyTargetAction<"+this.gav()+"::enemy="+H.b(y.gt(z))+"/"+H.b(y.gm(z))+">"}},
d7:{"^":"bg;",
gm:function(a){return this.b.gaP()},
j:function(a){return"ExitAction<"+H.b(this.b.gaP())+">"}}}],["","",,O,{"^":"",
xW:[function(a){return J.M(a)},"$1","jg",2,0,6],
cj:{"^":"c;aP:a<,hd:b<,dc:c<,M:d<,hH:e<,f,cW:r<,kI:x<,fa:y<,z,Q",
gq:function(a){var z=this.e
return X.am([this.d,this.a,X.am(z==null?new P.j_(0,null,null,null,null,null,0,[null]):P.aD([z],null)),X.am(this.r),X.am(this.x),this.y,this.z])},
v:function(a,b){var z
if(b==null)return!1
z=J.k(b)
return!!z.$iscj&&this.gq(this)===z.gq(b)},
j:function(a){return"ActionRecord<"+H.b(this.c)+", "+H.b(this.b)+", "+H.b(this.a)+">"}},
kg:{"^":"c;a,b,cW:c<,hd:d<,dc:e<,fa:f<,r,M:x<,aP:y<,z,hH:Q<",
B:function(){var z,y,x,w,v,u,t,s,r,q,p,o
z=this.z
switch(z){case C.B:y=this.b.a
break
case C.af:z=R.a5
y=P.aD(H.u([this.Q],[z]),z)
break
default:throw H.d(new P.aw("Mode "+z.j(0)+" not implemented"))}x=R.e3(P.T)
z=this.b.a
for(w=z.gJ(z),z=new H.eU(w,new O.kh(this),[H.l(z,0)]);z.n();){v=w.gC()
x.k(0,v,J.L(v.c3(this.b),this.a.h(0,v)))}z=this.x
w=this.d
u=this.e
t=this.y
s=J.M(this.Q)
r=this.c
r.toString
r=P.aD(new H.bi(r,O.jg(),[H.l(r,0),null]),null)
q=P.aD(new H.bi(y,O.jg(),[H.l(y,0),null]),null)
p=this.f
o=this.r
return new O.cj(t,w,u,z,s,P.J(null,null,null,P.t),r,q,p,o,x)},
kM:function(a){var z,y,x
this.a=R.e3(P.T)
for(z=a.a,y=new P.ay(z,z.r,null,null,[null]),y.c=z.e;y.n();){x=y.d
this.a.k(0,x,x.c3(a))}}},
kh:{"^":"a:0;a",
$1:function(a){var z=this.a.a
return z.gT(z).F(0,a)}},
hB:{"^":"c;a",
j:function(a){return C.aq.h(0,this.a)}}}],["","",,R,{"^":"",
ju:function(a,b){return new P.bG(function(){var z=a,y=b
var x=0,w=1,v,u
return function $async$ju(c,d){if(c===1){v=d
x=w}while(true)switch(x){case 0:x=2
return z
case 2:u=y.a
x=3
return P.dD(new H.Z(u,new R.uG(z),[H.l(u,0)]))
case 3:return P.bD()
case 1:return P.bE(v)}}})},
uG:{"^":"a:0;a",
$1:function(a){var z,y
z=a.geD()
y=J.M(this.a)
return z==null?y==null:z===y}},
a5:{"^":"nT;",
gbZ:function(){return this.f>0},
c3:function(a){var z,y,x,w
z=this.fr
if(z!=null)return z.$2(this,a)
y=10*this.f
z=$.$get$dU()
x=this.dy.a
z=z.a
if(x==null?z!=null:x!==z)y=C.f.bA(y,2)
z=a.a
x=[H.l(z,0)]
w=new H.Z(z,new R.kL(this),x).au(0,0,new R.kM())
if(typeof w!=="number")return H.o(w)
x=new H.Z(z,new R.kN(this),x).au(0,0,new R.kO())
if(typeof x!=="number")return H.o(x)
return y+w-x},
bd:function(a){var z=this.d
return z!=null&&z.a===a},
$isbW:1},
nT:{"^":"c+ec;"},
kL:{"^":"a:0;a",
$1:function(a){return J.f(a.gag(),this.a.dy)}},
kM:{"^":"a:18;",
$2:function(a,b){return J.R(J.R(a,b.gbk()?2:0),2*b.gaR())}},
kN:{"^":"a:0;a",
$1:function(a){return a.cd(this.a)}},
kO:{"^":"a:18;",
$2:function(a,b){return J.R(J.R(a,b.gbk()?1:0),b.gaR())}},
kj:{"^":"c;ap:c<,I:e@,aR:f@,t:r>,S:z<,m:ch*,b6:cx@,H:db<,eD:dx<,ag:dy<"},
e2:{"^":"bT;a,b,c,$ti",
gq:function(a){var z,y
z=X.am(this.gaC(this))
y=X.am(this.gT(this))
return X.c7(X.aH(X.aH(0,C.f.gq(z)),C.f.gq(y)))},
v:function(a,b){var z,y,x
if(b==null)return!1
z=J.k(b)
if(!!z.$ise2){y=X.am(this.gaC(this))
x=X.am(this.gT(this))
x=X.c7(X.aH(X.aH(0,C.f.gq(y)),C.f.gq(x)))
y=X.am(z.gaC(b))
z=X.am(z.gT(b))
z=x===X.c7(X.aH(X.aH(0,C.f.gq(y)),C.f.gq(z)))}else z=!1
return z},
$asbT:function(a){return[P.t,R.a5,a]},
$asK:function(a){return[R.a5,a]},
p:{
e3:function(a){var z=new H.a_(0,null,null,null,null,null,0,[P.t,[B.hW,R.a5,a]])
return new R.e2(new R.kl(),new R.km(),z,[a])},
kk:function(a,b){var z=R.e3(b)
a.A(0,new R.uj(b,z))
return z}}},
kl:{"^":"a:5;",
$1:function(a){return J.M(a)}},
km:{"^":"a:0;",
$1:function(a){return a!=null}},
uj:{"^":"a;a,b",
$2:function(a,b){this.b.k(0,a,b)
return b},
$signature:function(){return H.az(function(a){return{func:1,args:[R.a5,a]}},this,"e2")}},
eA:{"^":"c;a",
j:function(a){return C.F.h(0,this.a)}},
qF:{"^":"a5;a,b,b6:c<,ap:d<,eD:e<,aR:f<,t:r>,x,eH:y<,S:z<,Q,m:ch>,ds:cx<,I:cy<,H:db<,dx,ag:dy<,fr",
aw:function(a){var z=new R.cI(null,!0,H.u([],[P.h]),null,null,C.c,1,null,100,!0,!1,P.J(null,null,null,null),null,null,!0,C.l,null,$.$get$dU(),null)
z.fx=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof R.a5))return!1
if(this.b===b.b)if(J.f(this.c,b.c)){z=this.d
y=b.d
if(z==null?y==null:z===y){z=this.e
y=b.e
if(z==null?y==null:z===y)if(this.f===b.f){z=this.r
y=b.r
if(z==null?y==null:z===y)if(this.x===b.x)if(this.z===b.z)if(this.Q===b.Q)if(J.f(this.ch,b.ch))if(this.cx===b.cx)if(this.cy===b.cy)if(this.db===b.db)z=J.f(this.dy,b.dy)&&J.f(this.fr,b.fr)
else z=!1
else z=!1
else z=!1
else z=!1
else z=!1
else z=!1
else z=!1
else z=!1}else z=!1
else z=!1}else z=!1}else z=!1
else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(Y.y(0,C.p.gq(!0)),H.ak(this.b)),J.w(this.c)),J.w(this.d)),J.w(this.e)),this.f&0x1FFFFFFF),J.w(this.r)),this.x&0x1FFFFFFF),C.p.gq(!0)),C.p.gq(this.z)),H.ak(this.Q)),J.w(this.ch)),C.p.gq(this.cx)),H.ak(this.cy)),H.ak(this.db)),C.u.gq(this.dx)),J.w(this.dy)),J.w(this.fr)))},
j:function(a){return"Actor {alreadyMentioned="+String(!0)+",\ncategories="+P.bw(this.b,"[","]")+",\ncurrentRoomName="+H.b(J.v(this.c))+",\ncurrentWeapon="+J.v(this.d)+",\nfollowingActorId="+J.v(this.e)+",\nhitpoints="+C.f.j(this.f)+",\nid="+J.v(this.r)+",\ninitiative="+C.f.j(this.x)+",\nisActive="+String(!0)+",\nisPlayer="+String(this.z)+",\nitems="+P.bw(this.Q,"{","}")+",\nname="+H.b(J.v(this.ch))+",\nnameIsProperNoun="+String(this.cx)+",\npose="+H.b(C.F.h(0,this.cy.a))+",\npronoun="+this.db.a+",\nshield="+C.u.j(this.dx)+",\nteam="+J.v(this.dy)+",\nworldScoringFunction="+H.b(J.v(this.fr))+",\n}"}},
cI:{"^":"kj;fx,a,b,c,d,e,f,r,x,y,z,Q,ch,cx,cy,db,dx,dy,fr",
gb6:function(){this.gu()
return this.cx},
sb6:function(a){this.gu()
this.cx=a},
gap:function(){this.gu()
return this.c},
geD:function(){this.gu()
return this.dx},
gaR:function(){this.gu()
return this.f},
saR:function(a){this.gu()
this.f=a},
gt:function(a){this.gu()
return this.r},
gS:function(){this.gu()
return this.z},
gm:function(a){this.gu()
return this.ch},
sm:function(a,b){this.gu()
this.ch=b},
gds:function(){this.gu()
return this.cy},
gI:function(){this.gu()
return this.e},
sI:function(a){this.gu()
this.e=a},
gH:function(){this.gu()
return this.db},
gag:function(){this.gu()
return this.dy},
gu:function(){var z=this.fx
if(z!=null){z.a
this.a=!0
this.b=this.fx.b
this.cx=this.fx.c
this.c=this.fx.d
this.dx=this.fx.e
this.f=this.fx.f
this.r=this.fx.r
this.x=this.fx.x
this.fx.y
this.y=!0
this.z=this.fx.z
this.Q=this.fx.Q
this.ch=this.fx.ch
this.cy=this.fx.cx
this.e=this.fx.cy
this.db=this.fx.db
this.d=this.fx.dx
this.dy=this.fx.dy
this.fr=this.fx.fr
this.fx=null}return this},
B:function(){var z,y,x,w,v,u,t,s,r,q,p,o,n,m,l,k
z=this.fx
if(z==null){this.gu()
this.a
this.gu()
y=this.b
this.gu()
x=this.cx
this.gu()
w=this.c
this.gu()
v=this.dx
this.gu()
u=this.f
this.gu()
t=this.r
this.gu()
s=this.x
this.gu()
this.y
this.gu()
r=this.z
this.gu()
q=this.Q
this.gu()
p=this.ch
this.gu()
o=this.cy
this.gu()
n=this.e
this.gu()
m=this.db
this.gu()
l=this.d
this.gu()
k=this.dy
this.gu()
z=new R.qF(!0,y,x,w,v,u,t,s,!0,r,q,p,o,n,m,l,k,this.fr)
if(t==null)H.n(P.H("id"))
if(p==null)H.n(P.H("name"))
if(k==null)H.n(P.H("team"))}this.fx=z
return z}}}],["","",,U,{"^":"",
vw:function(a){switch(a){case C.a1:return"spear"
case C.a2:return"branch"
case C.a3:return"tent"
case C.h:return"sword"
default:throw H.d(P.X(a))}},
d8:{"^":"hS;$ti",
gaP:function(){return U.vw(this.a)},
$isbW:1},
hS:{"^":"c+ec;$ti"},
d9:{"^":"c;a",
j:function(a){return C.ap.h(0,this.a)}},
ds:{"^":"d8;b,c,eH:d<,ag:e<,m:f>,a",
gt:function(a){return H.ak(this)},
gbZ:function(){return!1},
gS:function(){return!1},
gds:function(){return!1},
gH:function(){return C.l},
$asd8:I.a0,
$ashS:I.a0}}],["","",,G,{"^":"",nI:{"^":"c;",
bc:function(){var z=0,y=new P.aU(),x,w=2,v,u=this,t,s
var $async$bc=P.aP(function(a,b){if(a===1){v=b
z=w}while(true)switch(z){case 0:if(u.r==null)throw H.d(new P.z("Cannot run a LoopedEvent before onFinishedGoto is defined."))
if(u.f){u.d.si(0,0)
u.a.$1(u.r)
z=1
break}t=u.d
s=u.e
case 3:if(!!0){z=4
break}if(!(!u.f&&t.gi(t)===0&&s.a.length===0)){z=4
break}z=5
return P.B(u.dE(),$async$bc,y)
case 5:z=3
break
case 4:t=s.a
if(t.length!==0){u.b.$1(t.charCodeAt(0)==0?t:t)
s.a=""}case 1:return P.B(x,0,y)
case 2:return P.B(v,1,y)}})
return P.B(null,$async$bc,y)}}}],["","",,B,{"^":"",fV:{"^":"c;cV:a<,dj:b<,cJ:c>",
j:function(a){return"ConsequenceStats<order="+H.b(this.c)+", cumProb="+C.d.hO(this.b,3)+", score="+J.fL(this.a,2)+">"}},cx:{"^":"c;bL:a<,ev:b>,fm:c<,kZ:d<,dj:e<,f,r,x,cJ:y>",
gq:function(a){return X.am([this.a,this.e,this.b,this.d,this.y,this.f,this.r,this.x])},
v:function(a,b){var z
if(b==null)return!1
z=J.k(b)
return!!z.$iscx&&this.gq(this)===z.gq(b)},
j:function(a){var z,y
z=this.a
y=J.k(z)
z="PlanConsequence<"+y.gq(z)+", "+y.j(z)+", "+J.v(this.b)+", "+H.b(this.d)+", "+this.y+", "
return z+(this.x?"isSuccess":"")+">"},
fo:function(a,b,c,d,e,f,g,h){this.c.b=this.a.f},
p:{
hX:function(a,b,c,d,e,f,g,h){var z,y
z=b==null
y=z?0:b.gcJ(b)+1
y=new B.cx(a,c,d,e,z?e:e*b.gdj(),g,f,h,y)
y.fo(a,b,c,d,e,f,g,h)
return y}}}}],["","",,G,{"^":"",kn:{"^":"c;a,b,c,d,e,f",
jV:function(a,b,c){var z,y,x,w,v,u,t,s,r,q
z=this.a
z.U("...")
z.U("combining scores")
y=H.u([],[P.T])
for(x=J.as(a),w=null;x.n()===!0;){v=x.gC()
z.U(new G.kH(v))
if(v.gdj()>0.15)if(w==null){z.U("    - first _bestCase")
w=v}else if(J.a3(v.gcV(),w.gcV())){z.U("    - new _bestCase")
w=v}u=J.dW(J.L(v.gcV(),b),v.b)
z.U(new G.kI(u))
y.push(u)}x=C.a.au(y,0,new G.kJ())
t=y.length
if(typeof x!=="number")return x.dI()
s=x/t
x=w==null
r=x?0:J.L(w.gcV(),b)
x=x?w:w.gcJ(w)
if(typeof r!=="number")return r.dI()
if(typeof x!=="number")return H.o(x)
x=r/x
z.U("- uplifts average = "+H.b(s))
z.U("- best = "+H.b(x))
q=x+s
z.U("- result = "+H.b(q))
return q},
fb:function(){var z=this
return new P.bG(function(){var y=0,x=1,w,v,u,t,s
return function $async$fb(a,b){if(a===1){w=b
y=x}while(true)switch(y){case 0:v=z.f,u=v.gT(v),u=u.gJ(u),t=1
case 2:if(!u.n()){y=3
break}s=u.gC()
y=4
return""+t+") "+H.b(J.C(s))+"\t"+J.fL(v.h(0,s),2)
case 4:++t
y=2
break
case 3:return P.bD()
case 1:return P.bE(w)}}})},
dt:function(a,b,c){var z=0,y=new P.aU(),x=1,w,v=this,u,t,s,r,q,p,o,n,m,l,k,j,i
var $async$dt=P.aP(function(d,e){if(d===1){w=e
z=x}while(true)switch(z){case 0:u=v.f
u.a2(0)
t=v.c
s=t.a
r=s.a.bs(0,new G.kK(v))
q=r.c3(s)
p=v.a
o=r.ch
p.dm("Planning for "+H.b(o)+", initialScore="+H.b(q))
n=new P.c6(v.ed(r,s).a(),null,null,null)
case 2:if(!n.n()){z=3
break}m=n.c
l=m==null?n.b:m.gC()
m=J.q(l)
p.aW("Evaluating action '"+H.b(m.gm(l))+"' for "+H.b(o))
if(!l.a_(r,s)){p.aW("- action '"+H.b(m.gm(l))+"' isn't applicable")
z=2
break}z=4
return P.B(v.c8(t,l,b,a,c).ar(0),$async$dt,y)
case 4:k=e
j=J.P(k)
if(j.gE(k)===!0){p.aW("- action '"+H.b(m.gm(l))+"' is possible but we couldn't get to any outcomes while planning. Scoring with negative infinity.")
u.k(0,l,-1/0)
z=2
break}p.aW("- action '"+H.b(m.gm(l))+"' leads to "+H.b(j.gi(k))+" different ConsequenceStats, initialScore="+H.b(q))
i=v.jV(k,q,b)
u.k(0,l,i)
p.aW("- action '"+H.b(m.gm(l))+"' was scored "+H.b(i))
z=2
break
case 3:v.e=!0
return P.B(null,0,y)
case 1:return P.B(w,1,y)}})
return P.B(null,$async$dt,y)},
kX:function(a){return this.dt(50,10,a)},
ed:function(a,b){return new P.bG(function(){var z=a,y=b
var x=0,w=1,v,u,t,s,r,q,p
return function $async$ed(c,d){if(c===1){v=d
x=w}while(true)switch(x){case 0:u=y.e
x=2
return P.dD((u.length!==0?C.a.gw(u):null).gca())
case 2:u=(u.length!==0?C.a.gw(u):null).gbg()
t=u.length
s=H.aM(H.b_(Q.d7),[H.b_(Q.bu)])
r=H.aM(H.b_(Q.ag),[H.b_(R.a5)])
q=0
case 3:if(!(q<u.length)){x=5
break}p=u[q]
x=r.aF(p)?6:8
break
case 6:x=9
return P.dD(Q.jr(z,y,p))
case 9:x=7
break
case 8:x=s.aF(p)?10:12
break
case 10:x=13
return P.dD(Q.js(z,y,p))
case 13:x=11
break
case 12:throw H.d(new P.z(H.b(p)+" is not one of the supported ones"))
case 11:case 7:case 4:u.length===t||(0,H.a8)(u),++q
x=3
break
case 5:return P.bD()
case 1:return P.bE(v)}}})},
c8:function(a2,a3,a4,a5,a6){var $async$c8=P.aP(function(a7,a8){switch(a7){case 2:u=x
z=u.pop()
break
case 1:v=a8
z=w}while(true)switch(z){case 0:s={}
r=a2.a
q=r.a.bs(0,new G.ks(t))
p=t.a
p.aW("=====")
p.aW(new G.kt(a3,q))
p.aW(new G.ku(a3))
if(!a3.a_(q,r)){p.aW("- firstAction not applicable")
z=1
break}o=q.c3(r)
p.aW(new G.kz(a2,o))
p.aW(new G.kA(a2))
n=P.b6(null,B.cx)
m=P.J(null,null,null,A.ba)
l=J.k(r)
k=l.gq(r)
for(j=new P.c6(a3.dd(q,a2,r).a(),null,null,null);j.n();){i=j.c
h=i==null?j.b:i.gC()
if(l.gq(r)!==k)throw H.d(new P.z("Action "+a3.j(0)+" modified world state when producing "+H.b(h)+"."))
n.ai(h)}s.a=0
r=t.b
case 3:if(!!n.gE(n)){z=4
break}++s.a
z=1000*(Date.now()-$.$get$e4().a)>5000?5:6
break
case 5:z=7
return P.cK(a6.$0(),$async$c8,y)
case 7:$.e4=new P.bU(Date.now(),!1)
case 6:g=n.cN()
p.U("----")
p.U(new G.kB(g))
p.U(new G.kC(g))
l=J.fG(g)
if(typeof l!=="number"){l.am()
z=1
break}if(l>a4||s.a>a5){p.U(new G.kD(s,a4,g))
p.U(new G.kE(g))
z=4
break}z=g.gbL().e.length===0?8:9
break
case 8:p.U("- leaf node: world.situations is empty (end of book)")
l=g.a
q=l.a.bV(0,new G.kF(t),new G.kG())
if(q==null){p.U("- this actor ("+H.b(r)+") has been removed")
z=3
break}f=new B.fV(q.c3(l),g.e,g.y)
p.U(new G.kv(f))
z=10
x=[1]
return P.cK(P.iX(f),$async$c8,y)
case 10:z=3
break
case 9:l=g.a
j=l.e
e=(j.length!==0?C.a.gw(j):null).dJ(l)
q=l.a.bs(0,new G.kw(t))
j=J.k(e)
d=j.v(e,q)
p.U("- actor: "+H.b(j.gm(e))+" (isMain=="+d+")")
p.U("- mainActor: "+H.b(J.C(q)))
f=new B.fV(q.c3(l),g.e,g.y)
p.U(new G.kx(o,f))
p.U(new G.ky(g))
z=11
x=[1]
return P.cK(P.iX(f),$async$c8,y)
case 11:p.U("- generating all actions for "+H.b(j.gm(e)))
j=J.L(n.c,n.b)
i=n.a
if(typeof j!=="number"){j.bp()
z=1
break}for(c=new P.c6(t.ed(e,l).a(),null,null,null);c.n();){b=c.c
a=b==null?c.b:b.gC()
if(!a.a_(e,l))continue
for(b=new P.c6(a.dd(e,g,l).a(),null,null,null);b.n();){a0=b.c
a1=a0==null?b.b:a0.gC();++t.d
if(a1.gdj()<0.05)continue
if(m.F(0,a1.gbL()))continue
n.ai(a1)}}c=J.L(n.c,n.b)
b=n.a
if(typeof c!=="number"){c.bp()
z=1
break}p.U("- added "+(((c&b.length-1)>>>0)-((j&i.length-1)>>>0))+" new PlanConsequences")
m.l(0,l)
z=3
break
case 4:case 1:return P.cK(null,0,y)
case 2:return P.cK(v,1,y)}})
var z=0,y=P.qY($async$c8),x,w=2,v,u=[],t=this,s,r,q,p,o,n,m,l,k,j,i,h,g,f,e,d,c,b,a,a0,a1
return P.tV(y)}},kH:{"^":"a:1;a",
$0:function(){return"  - consequence: "+H.b(this.a)}},kI:{"^":"a:1;a",
$0:function(){return"    - uplift = "+H.b(this.a)}},kJ:{"^":"a:3;",
$2:function(a,b){return J.R(a,b)}},kK:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a.b)}},ks:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a.b)}},kt:{"^":"a:1;a,b",
$0:function(){var z=this.a
return"_getConsequenceStats for firstAction '"+H.b(z.gm(z))+"' of "+H.b(J.C(this.b))}},ku:{"^":"a:1;a",
$0:function(){return"- firstAction == "+this.a.j(0)}},kz:{"^":"a:1;a,b",
$0:function(){var z=this.a
return"- current: initialScore="+H.b(this.b)+", cumProb="+H.b(z.e)+" (prob="+H.b(z.d)+", ord="+z.y+")"}},kA:{"^":"a:1;a",
$0:function(){var z=this.a
return"- initial action: "+C.b.bM(" ",z.y)+"- "+J.v(z.b)}},kB:{"^":"a:1;a",
$0:function(){return"evaluating a PlanConsequence of '"+H.b(J.C(J.jQ(this.a)))+"'"}},kC:{"^":"a:1;a",
$0:function(){var z=this.a.gbL().e
return"- situation: "+H.b(J.jV(z.length!==0?C.a.gw(z):null))}},kD:{"^":"a:1;a,b,c",
$0:function(){return"- order ("+H.b(J.fG(this.c))+") higher than maximum ("+this.b+"), or consequences ("+this.a.a+") higher than maximum"}},kE:{"^":"a:1;a",
$0:function(){var z=this.a.gbL().c.ar(0)
C.a.c4(z,new G.kq())
return"- how we got here: "+new H.ap(z,new G.kr(),[null,null]).aq(0," <- ")}},kq:{"^":"a:3;",
$2:function(a,b){var z=a==null?a:a.gM()
if(!(z==null))z=J.bM(z,b==null?b:b.gM())
return z==null?1:z}},kr:{"^":"a:0;",
$1:function(a){return a.gaP()}},kF:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a.b)}},kG:{"^":"a:1;",
$0:function(){return}},kv:{"^":"a:1;a",
$0:function(){return"- "+this.a.j(0)}},kw:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a.b)}},kx:{"^":"a:1;a,b",
$0:function(){return"- mainActor's score == "+this.b.j(0)+" (initial="+H.b(this.a)+")"}},ky:{"^":"a:1;a",
$0:function(){var z=this.a.gbL().c.ar(0)
C.a.c4(z,new G.ko())
return"- how we got here: "+new H.ap(z,new G.kp(),[null,null]).aq(0," <- ")}},ko:{"^":"a:3;",
$2:function(a,b){var z=a==null?a:a.gM()
if(!(z==null))z=J.bM(z,b==null?b:b.gM())
return z==null?1:z}},kp:{"^":"a:0;",
$1:function(a){return a.gaP()}},ez:{"^":"c;a,ca:b<",
gE:function(a){return this.b.length===0},
p:{
oe:function(a){var z,y,x,w,v,u,t,s,r,q
z={}
if(a.gE(a)){$.$get$hY().hS("Created with no recommendations.")
return new G.ez([],[])}y=a.gT(a)
x=P.ac(y,!0,H.E(y,"I",0))
C.a.b4(x,"removeWhere")
C.a.ep(x,new G.uk(a),!0)
if(x.length===1)return new G.ez([1000],x)
C.a.c4(x,new G.ul(a))
w=a.gaC(a).au(0,1/0,P.v8())
v=a.gaC(a).au(0,-1/0,P.v7())
y=J.O(v)
u=J.O(w)
t=u.P(w,J.dW(y.P(v,w),0.1))
z.a=t
if(u.v(w,v)){t=J.L(t,1)
z.a=t
u=t}else u=t
s=y.P(v,u)
r=P.hG(x.length,new G.un(z,a,x,s),!1,P.aI)
q=new H.ap(r,new G.uo(C.a.au(r,0,G.jA())),[null,null]).aV(0,!1)
z=C.a.au(q,0,G.jA())
if(typeof z!=="number")return H.o(z)
u=q.length
y=u-1
if(y<0)return H.e(q,y)
z=J.R(q[y],1000-z)
if(y>=q.length)return H.e(q,y)
q[y]=z
return new G.ez(q,x)},
x7:[function(a,b){return J.R(a,b)},"$2","jA",4,0,7]}},uk:{"^":"a:0;a",
$1:function(a){return J.f(this.a.h(0,a),-1/0)}},ul:{"^":"a:3;a",
$2:function(a,b){var z=this.a
return J.jK(J.bM(z.h(0,a),z.h(0,b)))}},un:{"^":"a:4;a,b,c,d",
$1:function(a){var z,y
z=this.c
if(a>=z.length)return H.e(z,a)
z=J.L(this.b.h(0,z[a]),this.a.a)
y=this.d
if(typeof z!=="number")return z.dI()
if(typeof y!=="number")return H.o(y)
return z/y}},uo:{"^":"a:0;a",
$1:function(a){var z=this.a
if(typeof a!=="number")return a.dI()
if(typeof z!=="number")return H.o(z)
return C.a4.dB(a/z*1000)}}}],["","",,K,{"^":"",cC:{"^":"c;a,m:b>,aP:c<,d,kR:e<,f",
gke:function(){return this.a},
gq:function(a){return C.b.gq(this.b)},
v:function(a,b){if(b==null)return!1
return b instanceof K.cC&&b.b===this.b},
p:{
oE:function(a,b,c,d,e,f){var z,y
z=new K.cC(null,a,b,c,d,e)
y=new S.aX(null,null,[Q.bu])
y.aD()
y.ak(0,f)
z.a=y.B()
return z}}}}],["","",,Q,{"^":"",bu:{"^":"c;ho:a<,aP:b<,c"}}],["","",,S,{"^":"",b8:{"^":"c;",
gbg:function(){return C.k},
gca:function(){return C.k},
dJ:function(a){return this.be(this.gM(),a)},
hE:function(a,b){},
hF:function(a,b){},
dQ:function(a){return!0}}}],["","",,S,{"^":"",
i2:function(a){var z=$.$get$bA().aA(3)
if(z<0||z>=3)return H.e(a,z)
return a[z]},
ot:function(a,b){var z,y,x,w,v
z=$.$get$bA().hD()*b
for(y=new H.bX(a,a.gi(a),0,null,[H.E(a,"aO",0)]),x=0,w=0;y.n();){v=y.d
if(typeof v!=="number")return H.o(v)
x+=v
if(x>=z)return w;++w}throw H.d(P.X("The weights do not add up to total="+b))},
ou:function(a,b){var z,y,x,w,v,u,t
z=$.$get$bA().aA(b)
for(y=a.length,x=0,w=0,v=0;u=a.length,v<u;u===y||(0,H.a8)(a),++v){t=a[v]
if(typeof t!=="number")return H.o(t)
x+=t
if(x>=z)return w;++w}throw H.d(P.X("The weights do not add up to total="+b))},
dk:function(a){var z,y,x,w,v,u,t,s,r,q,p,o,n,m
z=J.P(a)
y=z.aS(a,"{")
if(y!==-1){x=J.L(z.gi(a),1)
if(typeof x!=="number")return H.o(x)
x=y<x}else x=!1
if(x){w=H.u([],[P.t])
w.push(y)
u=y+1
t=null
s=1
while(!0){x=z.gi(a)
if(typeof x!=="number")return H.o(x)
if(!(u<x)){v=null
break}r=z.h(a,u)
x=J.k(r)
if(x.v(r,"{"))++s
else if(x.v(r,"|")&&s===1)w.push(u)
else if(x.v(r,"}")){--s
if(s===0){w.push(u)
v=u
t=v
break}}q=u+1
t=u
u=q}p=w.length-1
if(p>1){o=$.$get$bA().aA(p)
z=z.a5(a,0,y)
x=w.length
if(o<0||o>=x)return H.e(w,o)
n=w[o]
m=o+1
if(m>=x)return H.e(w,m)
m=z+H.b(S.dk(C.b.a5(a,n+1,w[m])))
if(typeof v!=="number")return v.G()
n=a.length
m+=C.b.a5(a,v+1,n)
z=m.charCodeAt(0)==0?m:m
if(t===n-1)return z
else return S.dk(z)}else if(t===J.L(z.gi(a),1))return a
else{if(typeof t!=="number")return t.G()
x=t+1
return z.a5(a,0,x)+H.b(S.dk(C.b.bt(a,x)))}}else return a},
cz:function(a,b,c,d){switch($.$get$bA().aA(2)){case 0:a.$0()
break
case 1:b.$0()
break
case 2:c.$0()
break
case 4:d.$0()
break}},
ov:function(a){if(a<0||a>1)throw H.d(P.a2(a,0,1,"Probability needs to be within <0,1>.",null))
if(a===0)return!1
if(a===1)return!0
return $.$get$bA().hD()<a}}],["","",,Y,{"^":"",aK:{"^":"c;as:a<,ax:b<,aU:c<,kU:d<,e,de:f@,bH:r<,bF:x<,kd:y<,ib:z<,cR:Q<,ch,kF:cx<,M:cy<",
h:function(a,b){switch(b){case"string":return this.a
case"subject":return this.b
case"object":return this.c
case"owner":return this.d
case"but":return this.f
case"positive":return this.r
case"negative":return this.x
case"endSentence":return this.y
case"startSentence":return!1
case"wholeSentence":return this.Q
case"time":return this.cy
default:throw H.d(P.X("Invalid key "+H.b(b)+"."))}}},bm:{"^":"c;a,M:b<,c",
geE:function(){return C.a.aM(this.a,new Y.pF())},
bC:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var z,y
if(b==null||J.f(b,""))return
z=(J.al(b).dl(b,".")||C.b.dl(b,"!")||C.b.dl(b,"?"))&&C.b.cj(b,P.G("[A-Z]",!0,!1))?!0:o
y=this.b
this.a.push(new Y.aK(b,m,h,j,i,d,k,g,e,!1,z,c,!1,y))},
l:function(a,b){return this.bC(a,b,null,!1,!1,!1,!1,null,null,null,!1,!1,null,null,!1)},
bh:function(a,b,c){return this.bC(a,b,null,!1,!1,!1,!1,null,null,null,!1,!1,null,null,c)},
ew:function(a,b,c){return this.bC(a,b,null,!1,!1,!1,!1,null,null,null,!1,!1,c,null,!1)},
jE:function(a,b,c,d){return this.bC(a,b,null,!1,c,!1,!1,null,null,null,!1,!1,d,null,!1)},
jD:function(a,b,c){return this.bC(a,b,null,!1,!1,!1,!1,c,null,null,!1,!1,null,null,!1)},
aa:function(a,b,c,d,e,f,g,h,i){return this.bC(a,b,null,c,d,!1,e,f,g,null,h,!1,i,null,!1)},
jG:function(a,b,c,d){return this.bC(a,b,null,!1,!1,!1,!1,null,null,c,!1,!1,d,null,!1)},
jF:function(a,b,c,d){return this.bC(a,b,null,!1,!1,!1,!1,c,null,null,!1,!1,d,null,!1)},
cb:function(a,b,c,d,e){var z,y,x
if(d!=null){z=J.P(a)
z=z.aS(a,"<owner's> "+b)!==-1||z.aS(a,"<ownerPronoun's> "+b)!==-1||z.aS(a,"<object-owner's> "+b)!==-1||z.aS(a,"<object-ownerPronoun's> "+b)!==-1}else z=!1
if(z)return a
if(!c.gds()){z=this.c
y=z.h(0,c.gt(c))
if(y==null)y=-1
if(typeof y!=="number")return y.Y()
if(typeof e!=="number")return H.o(e)
if(y<e)x=J.bP(a,b,"the "+b)
else{y=J.al(a)
x=J.cY(c.gm(c),P.G("[aeiouy]",!1,!1))?y.eZ(a,b,"an "+b):y.eZ(a,b,"a "+b)
z.k(0,c.gt(c),e)}}else x=null
return x==null?a:x},
eC:function(a,b){var z,y
if(!this.b0(a)||!this.b0(b))return!1
z=this.a
if(a<0||a>=z.length)return H.e(z,a)
if(z[a].gax()!=null){if(b<0||b>=z.length)return H.e(z,b)
y=z[b].gax()==null}else y=!0
if(y)return!1
if(a>=z.length)return H.e(z,a)
if(z[a].gaU()!=null){if(b<0||b>=z.length)return H.e(z,b)
y=z[b].gaU()==null}else y=!0
if(y)return!1
if(a>=z.length)return H.e(z,a)
y=J.M(z[a].gax())
if(b<0||b>=z.length)return H.e(z,b)
if(J.f(y,J.M(z[b].gaU()))){if(a>=z.length)return H.e(z,a)
y=J.M(z[a].gaU())
if(b>=z.length)return H.e(z,b)
z=J.f(y,J.M(z[b].gax()))}else z=!1
return z},
aB:[function(a){var z=J.O(a)
if(z.Y(a,0)||z.bq(a,this.a.length))return
else{z=this.a
if(a>>>0!==a||a>=z.length)return H.e(z,a)
return z[a].gaU()}},"$1","gaU",2,0,2],
kT:function(a,b){var z,y
if(!this.b0(a)||!this.b0(b))return!1
if(this.eC(a,b)&&this.W(a).cd(this.W(b))){z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gbH()){if(b<0||b>=z.length)return H.e(z,b)
y=z[b].gbH()}else y=!1
if(y)return!0
if(a>=z.length)return H.e(z,a)
if(z[a].gbF()){if(b<0||b>=z.length)return H.e(z,b)
z=z[b].gbF()}else z=!1
if(z)return!0}z=this.a
if(a>=z.length)return H.e(z,a)
y=z[a].gax()
if(b<0||b>=z.length)return H.e(z,b)
if(this.jq(y,z[b].gax())){if(a>=z.length)return H.e(z,a)
if(z[a].gbH()){if(b>=z.length)return H.e(z,b)
y=z[b].gbF()}else y=!1
if(y)return!0
if(a>=z.length)return H.e(z,a)
if(z[a].gbF()){if(b>=z.length)return H.e(z,b)
z=z[b].gbH()}else z=!1
if(z)return!0}return!1},
hI:function(a){var z,y,x,w,v,u,t,s,r,q,p,o,n,m,l,k,j,i,h,g,f,e
z=this.a
y=C.a.au(z,[],new Y.pG())
C.a.b4(z,"retainWhere")
C.a.ep(z,new Y.pH(y),!1)
x=a&&this.geE()?C.a.aS(z,C.a.hr(z,new Y.pI()))+1:z.length
if(x<1)return""
for(w=-1,v=!0,u=!1,t=!1,s=0,r="";s<x;++s){q=s===0
if(!q){p=s-1
o=this.eC(p,s)
if(s>=z.length)return H.e(z,s)
if(z[s].gde()||this.kT(s,p)){if(p<0||p>=z.length)return H.e(z,p)
t=!z[p].gde()}else t=!1
if(s>=z.length)return H.e(z,s)
z[s].sde(t)
n=s-w
if(n<3)if(!u){if(s>=z.length)return H.e(z,s)
z[s].gib()
if(p<0||p>=z.length)return H.e(z,p)
if(!z[p].gkd()){if(s>=z.length)return H.e(z,s)
if(!z[s].gcR())if(this.d7(s,p)||o)if(!(t&&n>1)){if(t){if(p>=z.length)return H.e(z,p)
n=z[p].gde()}else n=!1
n=n||this.le(s)>4}else n=!0
else n=!0
else n=!0}else n=!0
v=n}else v=!0
else v=!0
if(v){if(p<0||p>=z.length)return H.e(z,p)
if(z[p].gcR()){r+=" "
p=r}else{r+=". "
p=r}if(t){if(s>=z.length)return H.e(z,s)
n=!z[s].gcR()}else n=!1
r=n?r+"But ":p
u=!1}else if(t){r+=S.i2([" but "," but ",", but "])
u=!this.hX(s,s+1)&&!0}else{r+=S.i2([" and "," and ",", and "])
u=!0}}m=this.dS(s)
p=!v
if(p){n=s-1
if(this.d7(s,n))if(J.cY(this.dS(n),"<subject> "))if(J.cY(m,"<subject> "))m=H.jF(m,"<subject> ","",0)}l=J.r(m,"<action>",this.dS(s))
if(this.jp(s,s-1))n=!(this.aB(s).gH()===C.l&&this.W(s).gH()===C.l)
else n=!1
if(n)l=J.r(J.r(J.r(J.r(l,"<object-owner's> <object>",this.aB(s).gH().b),"<object-ownerPronoun's> <object>",this.aB(s).gH().b),"<object>",this.aB(s).gH().b),"<object's>",this.aB(s).gH().c)
if(this.d7(s,s-1))l=J.r(J.r(J.r(J.r(l,"<owner's> <subject>",this.W(s).gH().a),"<ownerPronoun's> <subject>",this.W(s).gH().a),"<subject>",this.W(s).gH().a),"<subject's>",this.W(s).gH().c)
n=s-1
if(this.aB(n)!=null&&this.W(s)!=null&&this.W(n)!=null&&J.f(J.M(this.aB(n)),J.M(this.W(s)))&&this.W(n).gH()!==this.W(s).gH())l=J.r(J.r(J.r(J.r(l,"<owner's> <subject>",this.W(s).gH().a),"<ownerPronoun's> <subject>",this.W(s).gH().a),"<subject>",this.W(s).gH().a),"<subject's>",this.W(s).gH().c)
if(this.W(n)!=null&&this.aB(s)!=null&&J.f(J.M(this.W(n)),J.M(this.aB(s)))&&this.W(n).gH()!==this.W(s).gH())l=J.r(J.r(J.r(J.r(l,"<object-owner's> <object>",this.aB(s).gH().a),"<object-ownerPronoun's> <object>",this.aB(s).gH().a),"<object>",this.aB(s).gH().b),"<object's>",this.aB(s).gH().c)
if(s>=z.length)return H.e(z,s)
n=z[s]
k=n.gax()
j=n.gaU()
i=n.gkU()
h=n.e
if(k!=null){g=k.gS()?J.r(J.r(l,"<subject>","you"),"<subject's>","your"):l
f=k.gH()===C.I||k.gH()===C.as
e=J.al(g)
g=J.bP(f?J.r(J.r(J.r(J.r(J.r(e.cg(g,"<s>",""),"<es>",""),"<ies>","y"),"<does>","do"),"<is>","are"),"<has>","have"):J.r(J.r(J.r(J.r(J.r(e.cg(g,"<s>","s"),"<es>","es"),"<ies>","ies"),"<does>","does"),"<is>","is"),"<has>","has"),"<subject>","<subjectNoun>")
e=k.gH()
g=H.cd(g,"<subject>",e.a)
f=n.cy
g=J.bP(this.cb(g,"<subjectNoun>",k,i,f),"<subjectNoun>",k.gm(k))
e=k.gH()
g=H.cd(g,"<subjectPronoun>",e.a)
g=J.bP(this.cb(J.cg(l,P.G("<subject>.+<subject's>",!0,!1))===!0?J.r(g,"<subject's>",k.gH().c):g,"<subject's>",k,i,f),"<subject's>",H.b(k.gm(k))+"'s")
f=k.gH()
g=J.r(H.cd(g,"<subject's>",f.c),"<subjectPronoun's>",k.gH().c)}else g=l
if(j!=null){g=j.gS()?J.r(J.r(g,"<object>","you"),"<object's>","your"):J.r(this.cb(g,"<object>",j,h,n.cy),"<object>",j.gm(j))
g=J.r(g,"<objectPronoun>",j.gH().b)
if(J.cg(l,P.G("<object>.+<object's>",!0,!1))===!0)g=J.r(g,"<object's>",j.gH().c)
g=J.bP(this.cb(g,"<object's>",j,h,n.cy),"<object's>",H.b(j.gm(j))+"'s")
f=j.gH()
g=J.r(H.cd(g,"<object's>",f.c),"<objectPronoun's>",j.gH().c)}n=n.cy
m=S.dk(this.fY(h,this.fY(i,g,l,"<owner>","<owner's>","<ownerPronoun>","<ownerPronoun's>",n),l,"<object-owner>","<object-owner's>","<object-ownerPronoun>","<object-ownerPronoun's>",n))
r+=H.b((!p||q)&&!t?Y.pE(m):m)
if(v)w=s
if(s>=z.length)return H.e(z,s)
if(z[s].gcR())u=!0}q=x-1
if(q>>>0!==q||q>=z.length)return H.e(z,q)
z=!z[q].gcR()?r+".":r
return H.vs(z.charCodeAt(0)==0?z:z,$.$get$il(),new Y.pJ(),null)},
dv:function(){return this.hI(!1)},
l2:function(){if(!this.geE()){C.a.si(this.a,0)
return}var z=this.a
C.a.dw(z,0,C.a.aS(z,C.a.hr(z,new Y.pK()))+1)},
hX:function(a,b){var z,y
if(!this.b0(a)||!this.b0(b))return!1
if(this.eC(a,b)&&this.W(a).cd(this.W(b))){z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gbH()){if(b>=z.length)return H.e(z,b)
y=z[b].gbF()}else y=!1
if(y)return!0
if(a>=z.length)return H.e(z,a)
if(z[a].gbF()){if(b>=z.length)return H.e(z,b)
z=z[b].gbH()}else z=!1
if(z)return!0}if(!this.d7(a,b))return!1
z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gbH()){if(b>=z.length)return H.e(z,b)
y=z[b].gbH()}else y=!1
if(y)return!0
if(a>=z.length)return H.e(z,a)
if(z[a].gbF()){if(b>=z.length)return H.e(z,b)
z=z[b].gbF()}else z=!1
if(z)return!0
else return!1},
dS:[function(a){var z=J.O(a)
if(z.Y(a,0)||z.bq(a,this.a.length))return
else{z=this.a
if(a>>>0!==a||a>=z.length)return H.e(z,a)
return z[a].gas()}},"$1","gas",2,0,4],
W:[function(a){var z=J.O(a)
if(z.Y(a,0)||z.bq(a,this.a.length))return
else{z=this.a
if(a>>>0!==a||a>=z.length)return H.e(z,a)
return z[a].gax()}},"$1","gax",2,0,2],
le:function(a){var z,y,x
z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gM()!=null){y=a-1
if(this.b0(y)){if(y<0||y>=z.length)return H.e(z,y)
y=z[y].gM()==null}else y=!0}else y=!0
if(y)return 1000
else{if(a>=z.length)return H.e(z,a)
y=z[a].gM()
x=a-1
if(x<0||x>=z.length)return H.e(z,x)
x=z[x].gM()
if(typeof y!=="number")return y.P()
if(typeof x!=="number")return H.o(x)
return y-x}},
j:function(a){return this.dv()},
b0:function(a){if(a>=this.a.length||a<0)return!1
else return!0},
fY:function(a,b,c,d,e,f,g,h){var z
if(a!=null){z=a.gS()?J.r(J.r(b,d,"you"),e,"your"):J.r(this.cb(b,d,a,null,h),d,a.gm(a))
z=J.r(z,f,a.gH().a)
z=J.r(H.cd(J.bP(this.cb(J.cg(c,P.G(d+".+"+e,!0,!1))===!0?J.r(z,e,a.gH().c):z,e,a,null,h),e,H.b(a.gm(a))+"'s"),e,a.gH().c),g,a.gH().c)}else z=J.r(J.r(J.r(J.r(b,d,""),e,""),f,""),g,"")
return z},
jp:function(a,b){var z,y
if(!this.b0(a)||!this.b0(b))return!1
z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gaU()!=null){if(b<0||b>=z.length)return H.e(z,b)
y=z[b].gaU()==null}else y=!0
if(y)return!1
if(a>=z.length)return H.e(z,a)
y=J.M(z[a].gaU())
if(b<0||b>=z.length)return H.e(z,b)
return J.f(y,J.M(z[b].gaU()))},
d7:function(a,b){var z,y
if(!this.b0(a)||!this.b0(b))return!1
z=this.a
if(a>=z.length)return H.e(z,a)
if(z[a].gax()!=null){if(b<0||b>=z.length)return H.e(z,b)
y=z[b].gax()==null}else y=!0
if(y)return!1
if(a>=z.length)return H.e(z,a)
y=J.M(z[a].gax())
if(b<0||b>=z.length)return H.e(z,b)
return J.f(y,J.M(z[b].gax()))},
jq:function(a,b){if(a==null||b==null)return!1
return J.f(a.gag(),b.gag())},
p:{
pE:function(a){var z,y,x
z=J.P(a)
y=z.F(a,"\n\n")!==!0?z.li(a):a
z=J.P(y)
if(z.gE(y)===!0)return y
x=J.ke(z.h(y,0))
if(J.f(z.gi(y),1))return x
else return x+z.bt(y,1)}}},pF:{"^":"a:0;",
$1:function(a){return J.f(a.gas(),"\n\n")}},pG:{"^":"a:41;",
$2:function(a,b){var z,y
z=J.P(a)
y=z.gX(a)?z.gw(a):null
if(y!=null)y.gkF()
z.l(a,b)
return a}},pH:{"^":"a:42;a",
$1:function(a){return J.cg(this.a,a)}},pI:{"^":"a:0;",
$1:function(a){return J.f(a.gas(),"\n\n")}},pJ:{"^":"a:43;",
$1:function(a){return H.b(a.h(0,1))+H.b(a.h(0,2))+H.b(a.h(0,3))}},pK:{"^":"a:0;",
$1:function(a){return J.f(a.gas(),"\n\n")}},bW:{"^":"nU;ds:a<,m:b>,c,ag:d<,S:e<,H:f<",
gt:function(a){return H.ak(this)},
geH:function(){return!0},
gbZ:function(){return!0},
p:{
hd:function(a,b,c,d,e){var z=H.u([],[P.h])
return new Y.bW(!0,b,z,e==null?$.$get$bf():e,!1,d)}}},nU:{"^":"c+ec;"},ec:{"^":"c;",
gbk:function(){if(this.gbZ()){this.geH()
var z=!0}else z=!1
return z},
cd:function(a){var z,y
z=this.gag()
y=$.$get$bf()
if(J.f(z,y)||J.f(a.gag(),y))return!1
return!J.f(this.gag(),a.gag())},
bb:function(a,b,c,d,e,f,g,h){a.aa(0,b,c,d,e,f,g,h,H.cc(this,"$isbW"))},
bJ:function(a,b,c){return this.bb(a,b,!1,!1,!1,c,null,!1)},
c0:function(a,b,c,d){return this.bb(a,b,!1,!1,!1,c,null,d)},
bI:function(a,b,c){return this.bb(a,b,!1,!1,c,null,null,!1)},
aY:function(a,b){return this.bb(a,b,!1,!1,!1,null,null,!1)},
l9:function(a,b,c,d){return this.bb(a,b,!1,!1,c,d,null,!1)},
l8:function(a,b,c,d){return this.bb(a,b,!1,c,d,null,null,!1)},
dz:function(a,b,c){return this.bb(a,b,!1,!1,!1,null,null,c)},
dA:function(a,b,c,d){return this.bb(a,b,c,!1,!1,d,null,!1)},
l6:function(a,b,c){return this.bb(a,b,!1,c,!1,null,null,!1)},
l7:function(a,b,c,d){return this.bb(a,b,c,!1,!1,null,null,d)}},cy:{"^":"c;a,b,c,d",
j:function(a){return this.a}}}],["","",,L,{"^":"",uu:{"^":"a:0;",
$1:function(a){a.gcz().b=2
return 2}},ut:{"^":"a:0;",
$1:function(a){a.gcz().b=0
return 0}},uw:{"^":"a:0;",
$1:function(a){a.gcz().b=1
return 1}},is:{"^":"c;"},qO:{"^":"is;t:a>",
aw:function(a){var z=new L.it(null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof L.is))return!1
z=this.a
y=b.a
return z==null?y==null:z===y},
gq:function(a){return Y.aR(Y.y(0,J.w(this.a)))},
j:function(a){return"Team {id="+J.v(this.a)+",\n}"},
p:{
eV:function(a){var z=new L.it(null,null)
a.$1(z)
return z.B()}}},it:{"^":"c;a,b",
gt:function(a){return this.gcz().b},
gcz:function(){var z=this.a
if(z!=null){this.b=z.a
this.a=null}return this},
B:function(){var z,y
z=this.a
if(z==null){y=this.gcz().b
z=new L.qO(y)
if(y==null)H.n(P.H("id"))}this.a=z
return z}}}],["","",,X,{"^":"",
jh:function(a,b){return new P.bG(function(){var z=a,y=b
var x=0,w=1,v,u,t,s,r,q
return function $async$jh(c,d){if(c===1){v=d
x=w}while(true)switch(x){case 0:u=z.a
t=new J.bh(u,u.length,0,null,[H.l(u,0)])
u=y.a
s=new J.bh(u,u.length,0,null,[H.l(u,0)])
case 2:r=t.n()
q=s.n()
x=r?5:6
break
case 5:x=7
return t.d
case 7:case 6:x=q?8:9
break
case 8:x=10
return s.d
case 10:case 9:case 3:if(r||q){x=2
break}case 4:return P.bD()
case 1:return P.bE(v)}}})}}],["","",,V,{"^":"",
jH:function(a,b){var z,y,x,w
z=P.J(null,null,null,P.t)
for(y=new H.hJ(null,J.as(a.a),a.b,[H.l(a,0),H.l(a,1)]);y.n();){x=y.a
w=J.w(x)
if(z.F(0,w))throw H.d(new P.z("Duplicate items in set: '"+H.b(x)+"' in "+b))
z.l(0,w)}}}],["","",,A,{"^":"",ba:{"^":"c;jA:a<,b,c,d,e,M:f<",
gq:function(a){var z,y,x,w
z=X.am(this.a)
y=X.am(this.c)
x=X.am(this.e)
w=this.f
return X.c7(X.aH(X.aH(X.aH(X.aH(0,z&0x1FFFFFFF),y&0x1FFFFFFF),x&0x1FFFFFFF),J.w(w)))},
v:function(a,b){var z
if(b==null)return!1
z=J.k(b)
return!!z.$isba&&this.gq(this)===z.gq(b)},
hp:function(a){var z,y,x
z=this.eb(a)
if(z==null)throw H.d(new P.z("Tried to elapseSituationTime of situation id="+H.b(a)+" that doesn't exist in situations ("+H.b(this.e)+")."))
y=this.e
if(z!==(z|0)||z>=y.length)return H.e(y,z)
x=y[z].bj()
if(z!==(z|0)||z>=y.length)return H.e(y,z)
y[z]=x},
bj:function(){var z=this.f
if(typeof z!=="number")return z.G()
this.f=z+1},
a9:function(a){return this.a.bs(0,new A.qB(a))},
hw:function(a){var z=this.a.bV(0,new A.qD(a),new A.qE())
if(z==null)return!1
return z.gbZ()},
hW:function(a){var z,y
z=this.eb(a)
if(z==null)return
y=this.e
if(z!==(z|0)||z>=y.length)return H.e(y,z)
return y[z]},
cM:function(a){var z=this.e
while(!0){if(!(z.length!==0&&!J.f(J.C(C.a.gw(z)),a)))break
C.a.eY(z)}if(z.length===0)throw H.d(P.X("Tried to pop situations until "+a+" but none was found in stack."))},
j:function(a){var z,y
z=this.a
y=z.fV()
y.K(0,z)
return"World<"+P.bw(y,"{","}")+">"},
b_:function(a,b){var z,y,x
z=this.a9(a)
y=z.aw(b)
x=this.a
x.D(0,z)
x.l(0,y)},
eb:function(a){var z,y,x
y=this.e
x=0
while(!0){if(!(x<y.length)){z=null
break}if(J.f(J.M(y[x]),a)){z=x
break}++x}return z},
fe:function(a){return this.d.bs(0,new A.qC(a))},
iC:function(a){var z,y
z=this.a
z.K(0,a.a)
y=a.c
this.c.K(0,new H.bi(y,new A.qy(),[H.l(y,0),null]))
this.b.K(0,a.b)
y=this.d
y.K(0,a.d)
C.a.K(this.e,a.e)
V.jH(new H.bi(z,new A.qz(),[H.l(z,0),null]),"WorldState.actors")
V.jH(new H.bi(y,new A.qA(),[H.l(y,0),null]),"WorldState.rooms")
this.f=a.f},
p:{
iM:function(a){var z,y
z=P.J(null,null,null,R.a5)
y=P.J(null,null,null,O.cj)
y=new A.ba(z,P.J(null,null,null,U.d8),y,P.J(null,null,null,null),[],null)
y.iC(a)
return y}}},qy:{"^":"a:0;",
$1:function(a){var z,y,x,w,v,u,t,s,r,q,p
z=a.gM()
y=a.ghd()
x=a.gdc()
w=a.gaP()
v=a.ghH()
u=P.t
t=P.aD(a.gcW(),u)
s=P.aD(a.gkI(),u)
r=a.y
q=a.z
p=R.kk(a.Q,P.T)
return new O.cj(w,y,x,z,v,P.J(null,null,null,u),t,s,r,q,p)}},qz:{"^":"a:0;",
$1:function(a){return J.M(a)}},qA:{"^":"a:0;",
$1:function(a){return J.C(a)}},qB:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a)}},qD:{"^":"a:0;a",
$1:function(a){return J.f(J.M(a),this.a)}},qE:{"^":"a:1;",
$0:function(){return}},qC:{"^":"a:0;a",
$1:function(a){return J.f(J.C(a),this.a)}}}],["","",,R,{"^":"",
y0:[function(){return A.dM()},"$0","tX",0,0,9]}],["","",,A,{"^":"",
dM:function(){var z=0,y=new P.aU(),x=1,w,v
var $async$dM=P.aP(function(a,b){if(a===1){w=b
z=x}while(true)switch(z){case 0:v=new P.x(0,$.i,null,[null])
v.N(null)
z=2
return P.B(v,$async$dM,y)
case 2:return P.B(null,0,y)
case 1:return P.B(w,1,y)}})
return P.B(null,$async$dM,y)}}],["","",,S,{"^":"",
fZ:function(a,b){var z=new S.e9(null,null,null,null,null)
new S.uf(a,b).$1(z)
return z.B()},
fY:{"^":"b8;",
gbg:function(){return[G.uC()]},
gca:function(){return[$.$get$ey()]},
gm:function(a){return"CounterAttackSituation"},
bj:function(){var z=new S.e9(null,null,null,null,null)
z.a=this
new S.lb().$1(z)
return z.B()},
be:function(a,b){if(a===0)return b.a9(this.a)
return},
br:function(a,b){return new H.Z(a,new S.lc(this),[H.l(a,0)])}},
uf:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaE().c=z
a.gaE().e=0
z=this.a
z=z.gt(z)
a.gaE().b=z
z=J.M(this.b)
a.gaE().d=z
return a}},
lb:{"^":"a:0;",
$1:function(a){var z=a.gaE().e
if(typeof z!=="number")return z.G()
a.gaE().e=z+1
return a}},
lc:{"^":"a:0;a",
$1:function(a){var z,y
z=J.q(a)
y=this.a
return J.f(z.gt(a),y.a)||J.f(z.gt(a),y.c)}},
qG:{"^":"fY;a,t:b>,c,M:d<",
aw:function(a){var z=new S.e9(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof S.fY))return!1
z=this.a
y=b.a
if(z==null?y==null:z===y){z=this.b
y=b.b
if(z==null?y==null:z===y)if(J.f(this.c,b.c)){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"CounterAttackSituation {counterAttacker="+J.v(this.a)+",\nid="+J.v(this.b)+",\ntarget="+H.b(J.v(this.c))+",\ntime="+J.v(this.d)+",\n}"}},
e9:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaE().c},
gM:function(){return this.gaE().e},
gaE:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaE().b
x=this.gaE().c
w=this.gaE().d
v=this.gaE().e
z=new S.qG(y,x,w,v)
if(y==null)H.n(P.H("counterAttacker"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("target"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,G,{"^":"",ld:{"^":"ag;Z:c<,b,a",
gav:function(){return"swing back at <object>"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to swing back")
a.toString
c.aa(0,"<subject> {go<es> wide|miss<es>}",!0,!1,!1,null,null,!1,a)
if(a.gI()===C.c){b.b_(a.r,new G.le())
c.aa(0,"<subject> lose<s> balance because of that",!1,!0,!0,null,null,!1,a)}return H.b(a.ch)+" fails to swing back at "+H.b(J.C(this.b))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
a.bJ(c,"<subject> swing<s> back at <object>",z)
y=b.e
C.a.l(y,M.eJ(a,z))
C.a.l(y,L.eH(a,z))
return H.b(a.gm(a))+" swings back at "+H.b(J.C(z))},"$3","ga7",6,0,0],
a4:function(a,b){return this.b.gI()===C.c?0.7:0.9},
a_:function(a,b){return a.bd(C.h)},
p:{
vJ:[function(a){return new G.ld("You can deal serious damage when countering because your opponent is often caught off guard. On the other hand, counters require fast reaction and could throw you out of balance.",a,null)},"$1","uC",2,0,1]}},le:{"^":"a:0;",
$1:function(a){a.sI(C.i)
return a}}}],["","",,X,{"^":"",
jD:function(a,b){switch($.$get$j8().aA(3)){case 0:b.l8(a,"<subject> collapse<s>, dead",!0,!0)
break
case 1:b.bI(a,"<subject> fall<s> backward",!0)
b.toString
a.aa(0,"<subject> twist<s>",!1,!1,!0,null,null,!1,b)
a.aa(0,"<subject> hit<s> the ground face down",!1,!0,!0,null,null,!1,b)
break
case 2:b.bI(a,"<subject> drop<s> to <subject's> knees",!0)
b.toString
a.aa(0,"<subject> keel<s> over",!1,!1,!0,null,null,!1,b)
break}a.bh(0,"\n\n",!0)}}],["","",,X,{"^":"",lo:{"^":"ag;Z:c<,b,a",
gav:function(){return"step back and parry"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to {parry|deflect it|meet it with <subject's> "+a.gap().f+"|fend it off}")
if(a.cy===C.i)c.aa(0,"<subject> <is> out of balance",!0,!1,!1,null,null,!1,a)
else S.cz(new X.lp(a,c),new X.lq(this,a,c),null,null)
return H.b(a.ch)+" fails to parry "+H.b(J.C(this.b))},"$3","ga6",6,0,0],
ac:[function(a,b,c){if(a.gS())a.aY(c,"<subject> {step<s>|take<s> a step} back")
a.dz(c,"<subject> {parr<ies> it|deflect<s> it|meet<s> it with <subject's> "+a.gap().f+"|fend<s> it off}",!0)
if(a.cy!==C.c){b.b_(a.r,new X.lr())
if(a.z)c.aa(0,"<subject> regain<s> balance",!1,!1,!1,null,null,!1,a)}b.cM("FightSituation")
return H.b(a.ch)+" steps back and parries "+H.b(J.C(this.b))},"$3","ga7",6,0,0],
a4:function(a,b){if(a.gS())return 1
return 0.5-(a.gI()===C.c?0:0.2)},
a_:function(a,b){return a.bd(C.h)},
p:{
vL:[function(a){return new X.lo("Stepping back is the safest way to get out of harm's way.",a,null)},"$1","uD",2,0,1]}},lp:{"^":"a:1;a,b",
$0:function(){this.b.aa(0,"<subject> {fail<s>|<does>n't succeed}",!0,!1,!1,null,null,!1,this.a)
return}},lq:{"^":"a:1;a,b,c",
$0:function(){return this.a.b.dA(this.c,"<subject> <is> too quick for <object>",!0,this.b)}},lr:{"^":"a:0;",
$1:function(a){a.sI(C.c)
return a}}}],["","",,F,{"^":"",lz:{"^":"ag;Z:c<,b,a",
gav:function(){return"dodge and counter"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to {dodge|sidestep}")
if(a.gI()===C.i)c.aa(0,"<subject> <is> out of balance",!0,!1,!1,null,null,!1,a)
else S.cz(new F.lA(a,c),new F.lB(this,a,c),null,null)
return H.b(a.ch)+" fails to dodge "+H.b(J.C(this.b))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z=this.b
a.c0(c,"<subject> {dodge<s>|sidestep<s>} it",z,!0)
if(z.gI()===C.c){z.l6(c,"<subject> lose<s> balance because of that",!0)
b.b_(z.r,new F.lC())}b.cM("FightSituation")
if(a.gS())c.l(0,"this opens an opportunity for a counter attack")
C.a.l(b.e,S.fZ(a,z))
return H.b(a.gm(a))+" dodges "+H.b(z.gm(z))},"$3","ga7",6,0,0],
a4:function(a,b){var z=a.gI()===C.c?0:0.2
if(a.gS())return 0.7-z
return 0.4-z},
a_:function(a,b){return a.gI()!==C.m},
p:{
vO:[function(a){return new F.lz("Dodging means moving your body out of harm's way. When done correctly, it will throw your opponent off balance and it will open an opportunity for a counter attack. When botched, it can get you killed.",a,null)},"$1","uE",2,0,1]}},lA:{"^":"a:1;a,b",
$0:function(){this.b.aa(0,"<subject> {can't|fail<s>|<does>n't succeed}",!0,!1,!1,null,null,!1,this.a)
return}},lB:{"^":"a:1;a,b,c",
$0:function(){return this.a.b.dA(this.c,"<subject> <is> too quick for <object>",!0,this.b)}},lC:{"^":"a:0;",
$1:function(a){a.sI(C.i)
return C.i}}}],["","",,U,{"^":"",
lZ:function(a,b){var z=new U.ee(null,null,null,null,null,null)
new U.uz(a,b).$1(z)
return z.B()},
hi:{"^":"b8;",
gbg:function(){return[Y.uZ(),Y.vj(),T.vl(),F.vm()]},
gca:function(){return H.u([$.$get$i5(),$.$get$ii(),$.$get$i9()],[Q.bg])},
gm:function(a){return"FightSituation"},
bj:function(){var z=new U.ee(null,null,null,null,null,null)
z.a=this
new U.m_().$1(z)
return z.B()},
be:function(a,b){var z,y,x
z=X.jh(this.d,this.a)
y=H.E(z,"I",0)
x=P.ac(new H.Z(z,new U.m0(b),[y]),!1,y)
y=x.length
if(typeof a!=="number")return a.ff()
return b.a9(x[C.f.ff(a,y)])},
br:function(a,b){return new H.Z(a,new U.m1(this),[H.l(a,0)])},
hF:function(a,b){var z,y
z=this.e
y=this.b.a
if(y.L(0,z))y.h(0,z).$2(a,b)},
dQ:function(a){var z,y
z=new U.m2(a)
y=this.d
if(z.$1(y)===!0)if(z.$1(this.a)===!0){z=y.a
z=(z&&C.a).aM(z,new U.m4(a))}else z=!1
else z=!1
return z}},
uz:{"^":"a:0;a,b",
$1:function(a){var z,y
z=$.$get$bb().aA(1073741823)
a.gay().d=z
a.gay().f=0
z=a.gay()
y=z.e
if(y==null){y=new S.aX(null,null,[P.t])
y.aD()
y.ak(0,C.k)
z.e=y
z=y}else z=y
y=this.a
z.ak(0,new H.cv(y,new U.tA(),[H.l(y,0),null]))
y=a.gay()
z=y.b
if(z==null){z=new S.aX(null,null,[P.t])
z.aD()
z.ak(0,C.k)
y.b=z}z.ak(0,J.fK(this.b,new U.tB()))
return a}},
tA:{"^":"a:0;",
$1:function(a){return J.M(a)}},
tB:{"^":"a:0;",
$1:function(a){return J.M(a)}},
m_:{"^":"a:0;",
$1:function(a){var z=a.gay().f
if(typeof z!=="number")return z.G()
a.gay().f=z+1
return a}},
m0:{"^":"a:0;a",
$1:function(a){return this.a.a9(a).gbk()}},
m1:{"^":"a:5;a",
$1:function(a){var z,y,x
if(a.gbk()){z=this.a
y=a.gt(a)
x=z.d.a
if(!(x&&C.a).F(x,y)){y=a.gt(a)
z=z.a.a
y=(z&&C.a).F(z,y)
z=y}else z=!0}else z=!1
return z}},
m2:{"^":"a:44;a",
$1:function(a){var z=a.a
return(z&&C.a).aM(z,new U.m3(this.a))}},
m3:{"^":"a:0;a",
$1:function(a){return this.a.a9(a).gbk()}},
m4:{"^":"a:45;a",
$1:function(a){var z=this.a.a9(a)
return z.gS()&&z.gbk()}},
qH:{"^":"hi;a,b,t:c>,d,M:e<",
aw:function(a){var z=new U.ee(null,null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof U.hi))return!1
if(J.f(this.a,b.a))if(J.f(this.b,b.b)){z=this.c
y=b.c
if(z==null?y==null:z===y)if(J.f(this.d,b.d)){z=this.e
y=b.e
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)),J.w(this.e)))},
j:function(a){return"FightSituation {enemyTeamIds="+J.v(this.a)+",\nevents="+J.v(this.b)+",\nid="+J.v(this.c)+",\nplayerTeamIds="+J.v(this.d)+",\ntime="+J.v(this.e)+",\n}"}},
ee:{"^":"c;a,b,c,d,e,f",
gt:function(a){return this.gay().d},
gM:function(){return this.gay().f},
gay:function(){var z,y
z=this.a
if(z!=null){z=z.a
if(!(z==null)){y=new S.aX(null,null,[H.l(z,0)])
y.aD()
y.ak(0,z)
z=y}this.b=z
z=this.a.b
if(!(z==null)){y=new A.eu(null,null,[H.l(z,0),H.l(z,1)])
y.cs()
y.ak(0,z)
z=y}this.c=z
z=this.a
this.d=z.c
z=z.d
if(!(z==null)){y=new S.aX(null,null,[H.l(z,0)])
y.aD()
y.ak(0,z)
z=y}this.e=z
this.f=this.a.e
this.a=null}return this},
B:function(){var z,y,x,w,v,u
z=this.a
if(z==null){y=this.gay()
x=y.b
if(x==null){x=new S.aX(null,null,[P.t])
x.aD()
x.ak(0,C.k)
y.b=x
y=x}else y=x
y=y==null?y:y.B()
x=this.gay()
w=x.c
if(w==null){w=new A.eu(null,null,[P.t,{func:1,v:true,args:[A.ba,Y.bm]}])
w.cs()
w.ak(0,C.ao)
x.c=w
x=w}else x=w
x=x==null?x:x.B()
w=this.gay().d
v=this.gay()
u=v.e
if(u==null){u=new S.aX(null,null,[P.t])
u.aD()
u.ak(0,C.k)
v.e=u
v=u}else v=u
v=v==null?v:v.B()
u=this.gay().f
z=new U.qH(y,x,w,v,u)
if(y==null)H.n(P.H("enemyTeamIds"))
if(x==null)H.n(P.H("events"))
if(w==null)H.n(P.H("id"))
if(v==null)H.n(P.H("playerTeamIds"))
if(u==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,Y,{"^":"",ep:{"^":"ag;Z:c<,b,a",
gav:function(){return"kick <object>"},
ab:[function(a,b,c){var z=this.b
a.bJ(c,"<subject> kick<s> <object>",z)
if(z.gI()===C.c){if(a.gS())z.l9(c,"<subject> lose<s> <object>",!0,$.$get$fk())
b.b_(z.gt(z),new Y.no())}if(b.a9(z.gt(z)).gI()===C.i)C.a.l(b.e,U.nV(z,a))
return H.b(a.gm(a))+" kicks "+H.b(z.gm(z))+" off balance"},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z=this.b
if(z.gI()===C.c||z.gI()===C.i){S.cz(new Y.np(this,a,c),new Y.nq(this,a,c),null,null)
b.b_(z.gt(z),new Y.nr())}else a.bJ(c,"<subject> kick<s> <object> on the ground",z)
return H.b(J.C(a))+" kicks "+H.b(z.gm(z))+" to ground"},"$3","ga7",6,0,0],
a4:function(a,b){var z=a.gI()===C.c?0:0.2
if(a.gS())return 0.7-z
return 0.5-z},
a_:function(a,b){return a.gI()===C.c},
p:{
wz:[function(a){return new Y.ep("Kicking opponents doesn't deal much damage but it can put them off balance or even to the ground. Such opponents are much easier targets for you and your allies.",a,null)},"$1","uZ",2,0,1]}},no:{"^":"a:0;",
$1:function(a){a.sI(C.i)
return a}},np:{"^":"a:1;a,b,c",
$0:function(){var z,y
z=this.c
y=this.a.b
this.b.bJ(z,"<subject> kick<s> <object>",y)
if(S.ov(0.5))y.aY(z,"<subject> flail<s> <subject's> arms")
y.bI(z,"<subject> fall<s>{| to the ground}",!0)}},nq:{"^":"a:1;a,b,c",
$0:function(){var z,y
z=this.c
y=this.a.b
this.b.c0(z,"<subject> kick<s> <object> off <object's> feet",y,!0)
if(y.gS())y.bI(z,"<subject> land<s> on the ground",!0)}},nr:{"^":"a:0;",
$1:function(a){a.sI(C.m)
return a}}}],["","",,U,{"^":"",
nV:function(a,b){var z=new U.ew(null,null,null,null,null)
new U.ud(a,b).$1(z)
return z.B()},
hT:{"^":"b8;",
gbg:function(){return H.u([A.v9()],[{func:1,ret:Q.ag,args:[R.a5]}])},
gca:function(){return[$.$get$ey()]},
gm:function(a){return"OffBalanceOpportunitySituation"},
bj:function(){var z=new U.ew(null,null,null,null,null)
z.a=this
new U.nW().$1(z)
return z.B()},
be:function(a,b){var z,y,x,w,v
if(typeof a!=="number")return a.am()
if(a>0)return
z=b.a9(this.a)
y=b.a
x=H.l(y,0)
w=P.ac(new H.Z(y,new U.nX(this,z),[x]),!0,x)
if(w.length===0)return
v=C.a.gO(w)
if(new A.hU("When an opponent is out of balance they are the most vulnerable.",z,null).a_(v,b))return v
return},
br:function(a,b){return new H.Z(a,new U.nY(b.a9(this.a)),[H.l(a,0)])}},
ud:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaG().d=z
a.gaG().e=0
z=J.M(this.a)
a.gaG().b=z
z=this.b
z=z==null?z:z.gt(z)
a.gaG().c=z
return a}},
nW:{"^":"a:0;",
$1:function(a){var z=a.gaG().e
if(typeof z!=="number")return z.G()
a.gaG().e=z+1
return a}},
nX:{"^":"a:5;a,b",
$1:function(a){var z,y
if(a.gbk())if(a.cd(this.b)){z=a.gt(a)
y=this.a.b
y=z==null?y!=null:z!==y
z=y}else z=!1
else z=!1
return z}},
nY:{"^":"a:0;a",
$1:function(a){var z=this.a
return J.f(a,z)||a.cd(z)}},
qI:{"^":"hT;a,b,t:c>,M:d<",
aw:function(a){var z=new U.ew(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof U.hT))return!1
if(J.f(this.a,b.a)){z=this.b
y=b.b
if(z==null?y==null:z===y){z=this.c
y=b.c
if(z==null?y==null:z===y){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1}else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"OffBalanceOpportunitySituation {actorId="+H.b(J.v(this.a))+",\nculpritId="+J.v(this.b)+",\nid="+J.v(this.c)+",\ntime="+J.v(this.d)+",\n}"}},
ew:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaG().d},
gM:function(){return this.gaG().e},
gaG:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaG().b
x=this.gaG().c
w=this.gaG().d
v=this.gaG().e
z=new U.qI(y,x,w,v)
if(y==null)H.n(P.H("actorId"))
if(w==null)H.n(P.H("id"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,A,{"^":"",hU:{"^":"ag;Z:c<,b,a",
gav:function(){return"stab <object>"},
ab:[function(a,b,c){var z=this.b
a.bJ(c,"<subject> tr<ies> to stab <object>",z)
a.toString
c.aa(0,"<subject> {go<es> wide|fail<s>|miss<es>}",!0,!1,!1,null,null,!1,a)
return H.b(a.gm(a))+" fails to stab "+H.b(J.C(z))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
y=J.q(z)
b.b_(y.gt(z),new A.nZ())
if(b.a9(y.gt(z)).gbZ()){a.c0(c,"<subject> thrust<s> {|<subject's> "+a.gap().f+"} deep into <object's> {shoulder|hip|thigh}",z,!0)
z.bI(c,"<subject> {scream|yell|grunt}<s> in pain",!0)}else{a.c0(c,"<subject> {stab<s>|run<s> <subject's> "+a.gap().f+" through} <object>",z,!0)
X.jD(c,z)}return H.b(J.C(a))+" stabs "+H.b(y.gm(z))},"$3","ga7",6,0,0],
a4:function(a,b){if(a.gS())return 0.6
return 0.5},
a_:function(a,b){return a.gI()===C.c&&this.b.gI()===C.i&&a.bd(C.h)},
p:{
x_:[function(a){return new A.hU("When an opponent is out of balance they are the most vulnerable.",a,null)},"$1","v9",2,0,1]}},nZ:{"^":"a:0;",
$1:function(a){a.saR(a.gaR()-1)
return a}}}],["","",,V,{"^":"",
o_:function(a,b){var z=new V.ex(null,null,null,null,null)
new V.uh(a,b).$1(z)
return z.B()},
hV:{"^":"b8;",
gbg:function(){return[K.va(),Y.vd()]},
gm:function(a){return"OnGroundDefenseSituation"},
bj:function(){var z=new V.ex(null,null,null,null,null)
z.a=this
new V.o0().$1(z)
return z.B()},
be:function(a,b){if(a===0)return b.a9(this.c)
return},
br:function(a,b){return new H.Z(a,new V.o1(this),[H.l(a,0)])}},
uh:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaH().c=z
a.gaH().e=0
z=this.a
z=z.gt(z)
a.gaH().b=z
z=J.M(this.b)
a.gaH().d=z
return a}},
o0:{"^":"a:0;",
$1:function(a){var z=a.gaH().e
if(typeof z!=="number")return z.G()
a.gaH().e=z+1
return a}},
o1:{"^":"a:0;a",
$1:function(a){var z,y
z=J.q(a)
y=this.a
return J.f(z.gt(a),y.a)||J.f(z.gt(a),y.c)}},
qJ:{"^":"hV;a,t:b>,c,M:d<",
aw:function(a){var z=new V.ex(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof V.hV))return!1
z=this.a
y=b.a
if(z==null?y==null:z===y){z=this.b
y=b.b
if(z==null?y==null:z===y)if(J.f(this.c,b.c)){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"OnGroundDefenseSituation {attacker="+J.v(this.a)+",\nid="+J.v(this.b)+",\ntargetOnGround="+H.b(J.v(this.c))+",\ntime="+J.v(this.d)+",\n}"}},
ex:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaH().c},
gM:function(){return this.gaH().e},
gaH:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaH().b
x=this.gaH().c
w=this.gaH().d
v=this.gaH().e
z=new V.qJ(y,x,w,v)
if(y==null)H.n(P.H("attacker"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("targetOnGround"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,K,{"^":"",o2:{"^":"ag;Z:c<,b,a",
gav:function(){return"parry it"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to {parry|deflect it|stop it{| with <subject's> "+a.gap().f+"}}")
S.cz(new K.o3(a,c),new K.o4(this,a,c),null,null)
return H.b(a.ch)+" fails to parry "+H.b(J.C(this.b))},"$3","ga6",6,0,0],
ac:[function(a,b,c){a.dz(c,"<subject> {parr<ies> it|stop<s> it with <subject's> "+a.gap().f+"}",!0)
b.cM("FightSituation")
return H.b(a.ch)+" parries "+H.b(J.C(this.b))},"$3","ga7",6,0,0],
a4:function(a,b){if(a.gS())return 0.6
return 0.3},
a_:function(a,b){return a.bd(C.h)},
p:{
x0:[function(a){return new K.o2("You can deal serious damage when countering because your opponent is often caught off guard. On the other hand, counters require fast reaction and could throw you out of balance.",a,null)},"$1","va",2,0,1]}},o3:{"^":"a:1;a,b",
$0:function(){var z=this.a
z.toString
this.b.aa(0,"<subject> {fail<s>|<does>n't succeed}",!0,!1,!1,null,null,!1,z)
return}},o4:{"^":"a:1;a,b,c",
$0:function(){return this.a.b.dA(this.c,"<subject> <is> too quick for <object>",!0,this.b)}}}],["","",,Y,{"^":"",oC:{"^":"ag;Z:c<,b,a",
gav:function(){return"roll out of way"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to roll out of the way")
a.toString
c.aa(0,"<subject> can't",!0,!1,!1,null,null,!1,a)
return H.b(a.gm(a))+" fails to roll out of the way"},"$3","ga6",6,0,0],
ac:[function(a,b,c){a.l7(c,"<subject> <is> able to roll out of the way",!0,!0)
if(a.gS()){b.b_(a.gt(a),new Y.oD())
c.aa(0,"<subject> jump<s> up on <subject's> feet",!1,!1,!1,null,null,!0,a)}b.cM("FightSituation")
return H.b(a.gm(a))+" rolls out of the way of "+H.b(J.C(this.b))+"'s strike"},"$3","ga7",6,0,0],
a4:function(a,b){if(a.gS())return 1
return 0.5},
a_:function(a,b){return!0},
p:{
xa:[function(a){return new Y.oC(null,a,null)},"$1","vd",2,0,1]}},oD:{"^":"a:0;",
$1:function(a){a.sI(C.c)
return a}}}],["","",,O,{"^":"",oS:{"^":"bg;Z:b<,a",
gm:function(a){return"Scramble."},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){a.aY(c,"<subject> tr<ies> to {scramble|crawl} out of {reach|harm's way}")
return H.b(a.gm(a))+" scrambles on ground"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){var z
if(a.gI()!==C.m)return!1
z=b.c
if(J.f(z.gw(z).gdc(),new H.aG(H.cS(new Y.ep("Kicking opponents doesn't deal much damage but it can put them off balance or even to the ground. Such opponents are much easier targets for you and your allies.",a,null)),null).j(0))&&z.gw(z).gcW().F(0,a.gt(a))&&z.gw(z).gfa()===!0)return!0
return!1}}}],["","",,T,{"^":"",m9:{"^":"ag;Z:c<,b,a",
gav:function(){return"kill <object> (WARNING should not be user-visible)"},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
y=J.q(z)
b.b_(y.gt(z),new T.ma())
c.jF(0,"<subject> {cuts|slashes|slits} <object's> {throat|neck|side}",z,a.gap())
z.bI(c,"<subject> die<s>",!0)
c.bh(0,"\n\n",!0)
return H.b(a.gm(a))+" slains "+H.b(y.gm(z))+" on the ground"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return this.b.gI()===C.m&&a.bd(C.h)},
p:{
wf:[function(a){return new T.m9(null,a,null)},"$1","vk",2,0,1]}},ma:{"^":"a:0;",
$1:function(a){a.saR(0)
return a}},pt:{"^":"ag;Z:c<,b,a",
gav:function(){return"strike down at <object>"},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
a.bJ(c,"<subject> strike<s> down {with <subject's> "+a.gap().f+" |}at <object>",z)
y=b.e
C.a.l(y,D.q4(a,z))
C.a.l(y,V.o_(a,z))
return H.b(a.ch)+" strikes down at "+H.b(J.C(z))+" on the ground"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return this.b.gI()===C.m&&a.gI()!==C.m&&a.bd(C.h)},
p:{
xh:[function(a){return new T.pt("Opponents on the ground are often the most vulnerable.",a,null)},"$1","vl",2,0,1]}}}],["","",,Q,{"^":"",pq:{"^":"bg;Z:b<,a",
gm:function(a){return"Stand up."},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){a.aY(c,"<subject> stand<s> up")
b.b_(a.gt(a),new Q.pr())
return H.b(a.gm(a))+" stands up"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){var z
if(a.gI()!==C.m)return!1
z=b.c
if(J.f(z.gw(z).gdc(),new H.aG(H.cS(new Y.ep("Kicking opponents doesn't deal much damage but it can put them off balance or even to the ground. Such opponents are much easier targets for you and your allies.",a,null)),null).j(0))&&z.gw(z).gcW().F(0,a.gt(a))&&z.gw(z).gfa()===!0)return!1
return!0}},pr:{"^":"a:0;",
$1:function(a){a.sI(C.c)
return C.c}}}],["","",,D,{"^":"",
q4:function(a,b){var z=new D.eO(null,null,null,null,null)
new D.ui(a,b).$1(z)
return z.B()},
io:{"^":"b8;",
gbg:function(){return[T.vk()]},
gm:function(a){return"StrikeDownSituation"},
bj:function(){var z=new D.eO(null,null,null,null,null)
z.a=this
new D.q5().$1(z)
return z.B()},
be:function(a,b){if(a===0)return b.a9(this.a)
return},
br:function(a,b){return new H.Z(a,new D.q6(this),[H.l(a,0)])}},
ui:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaL().c=z
a.gaL().e=0
z=this.a
z=z.gt(z)
a.gaL().b=z
z=J.M(this.b)
a.gaL().d=z
return a}},
q5:{"^":"a:0;",
$1:function(a){var z=a.gaL().e
if(typeof z!=="number")return z.G()
a.gaL().e=z+1
return a}},
q6:{"^":"a:0;a",
$1:function(a){var z,y
z=J.q(a)
y=this.a
return J.f(z.gt(a),y.a)||J.f(z.gt(a),y.c)}},
qN:{"^":"io;a,t:b>,c,M:d<",
aw:function(a){var z=new D.eO(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof D.io))return!1
z=this.a
y=b.a
if(z==null?y==null:z===y){z=this.b
y=b.b
if(z==null?y==null:z===y)if(J.f(this.c,b.c)){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"StrikeDownSituation {attacker="+J.v(this.a)+",\nid="+J.v(this.b)+",\ntargetOnGround="+H.b(J.v(this.c))+",\ntime="+J.v(this.d)+",\n}"}},
eO:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaL().c},
gM:function(){return this.gaL().e},
gaL:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaL().b
x=this.gaL().c
w=this.gaL().d
v=this.gaL().e
z=new D.qN(y,x,w,v)
if(y==null)H.n(P.H("attacker"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("targetOnGround"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,G,{"^":"",o9:{"^":"ag;Z:c<,b,a",
gav:function(){return"parry and counter"},
ab:[function(a,b,c){a.aY(c,"<subject> tr<ies> to {parry|deflect it|meet it with <subject's> "+a.gap().f+"|fend it off}")
if(a.cy===C.i)c.aa(0,"<subject> <is> out of balance",!0,!1,!1,null,null,!1,a)
else S.cz(new G.oa(a,c),new G.ob(this,a,c),null,null)
return H.b(a.ch)+" fails to parry "+H.b(J.C(this.b))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z=this.b
if(z.gI()===C.i){z.bI(c,"<subject> <is> out of balance",!0)
c.jG(0,"so <owner's> <subject> is {weak|feeble}",z,$.$get$jG())
a.dz(c,"<subject> {parr<ies> it easily|easily meet<s> it with <subject's> "+a.gap().f+"|fend<s> it off easily}",!0)}else a.dz(c,"<subject> {parr<ies> it|meet<s> it with <subject's> "+a.gap().f+"|fend<s> it off}",!0)
b.cM("FightSituation")
if(a.gS())c.l(0,"this opens an opportunity for a counter attack")
C.a.l(b.e,S.fZ(a,z))
return H.b(a.gm(a))+" parries "+H.b(z.gm(z))},"$3","ga7",6,0,0],
a4:function(a,b){var z,y
z=a.gI()===C.c?0:0.2
y=this.b.gI()===C.i?0.3:0
if(a.gS())return 0.6-z+y
return 0.3-z+y},
a_:function(a,b){return a.bd(C.h)},
p:{
x5:[function(a){return new G.o9("Parrying means deflecting your opponent's move with your weapon. When successful, it will give you an opportunity for a counter attack. It won't throw your opponent off balance like dodging does, but it's also slightly easier to do.",a,null)},"$1","vb",2,0,1]}},oa:{"^":"a:1;a,b",
$0:function(){this.b.aa(0,"<subject> {fail<s>|<does>n't succeed}",!0,!1,!1,null,null,!1,this.a)
return}},ob:{"^":"a:1;a,b,c",
$0:function(){return this.a.b.dA(this.c,"<subject> <is> too quick for <object>",!0,this.b)}}}],["","",,F,{"^":"",oc:{"^":"bg;Z:b<,a",
gm:function(a){return"Stand off."},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){if(a.gS())a.aY(c,"<subject> stand<s> off")
return H.b(a.gm(a))+" passes the opportunity"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return!0}}}],["","",,B,{"^":"",oA:{"^":"bg;Z:b<,a",
gm:function(a){return"Regain balance."},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){if(a.gS())a.c0(c,"<subject> regain<s> <object>",$.$get$fk(),!0)
b.b_(a.gt(a),new B.oB())
return H.b(a.gm(a))+" regains balance"},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return a.gI()===C.i}},oB:{"^":"a:0;",
$1:function(a){a.sI(C.c)
return C.c}}}],["","",,Y,{"^":"",m8:{"^":"ag;Z:c<,b,a",
gav:function(){return"kill <object> (WARNING should not be user-visible)"},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y,x,w
z=this.b
y=J.q(z)
b.b_(y.gt(z),new Y.mb())
x=b.a9(y.gt(z)).gbZ()
if(x){a.c0(c,"<subject> {slash<es>|cut<s>} <object's> {shoulder|abdomen|thigh}",z,!0)
z.bI(c,"<subject> {scream|yell|grunt}<s> in pain",!0)}else{a.c0(c,"<subject> {slash<es>|cut<s>} {across|through} <object's> {neck|abdomen|lower body}",z,!0)
X.jD(c,z)}w=H.b(J.C(a))+" slashes"
return w+(x?" (and kills)":"")+" "+H.b(y.gm(z))},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return a.bd(C.h)},
p:{
wg:[function(a){return new Y.m8(null,a,null)},"$1","vi",2,0,1]}},mb:{"^":"a:0;",
$1:function(a){a.saR(a.gaR()-1)
return a}},ps:{"^":"ag;Z:c<,b,a",
gav:function(){return"swing at <object>"},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
a.bJ(c,"<subject> swing<s> {<subject's> "+a.gap().f+" |}at <object>",z)
y=b.e
C.a.l(y,M.eJ(a,z))
C.a.l(y,L.eH(a,z))
return H.b(a.ch)+" starts a slash at "+H.b(J.C(z))},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return a.gI()===C.c&&this.b.gI()!==C.m&&a.bd(C.h)},
p:{
xj:[function(a){return new Y.ps("The basic swordfighting move is also often the most effective.",a,null)},"$1","vj",2,0,1]}}}],["","",,L,{"^":"",
eH:function(a,b){var z=new L.eG(null,null,null,null,null)
new L.ue(a,b).$1(z)
return z.B()},
ic:{"^":"b8;",
gbg:function(){return[F.uE(),G.vb(),X.uD()]},
gm:function(a){return"SlashDefenseSituation"},
bj:function(){var z=new L.eG(null,null,null,null,null)
z.a=this
new L.pk().$1(z)
return z.B()},
be:function(a,b){if(a===0)return b.a9(this.c)
return},
br:function(a,b){return new H.Z(a,new L.pl(this),[H.l(a,0)])}},
ue:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaJ().c=z
a.gaJ().e=0
z=this.a
z=z.gt(z)
a.gaJ().b=z
z=J.M(this.b)
a.gaJ().d=z
return a}},
pk:{"^":"a:0;",
$1:function(a){var z=a.gaJ().e
if(typeof z!=="number")return z.G()
a.gaJ().e=z+1
return a}},
pl:{"^":"a:0;a",
$1:function(a){var z,y
z=J.q(a)
y=this.a
return J.f(z.gt(a),y.a)||J.f(z.gt(a),y.c)}},
qL:{"^":"ic;a,t:b>,c,M:d<",
aw:function(a){var z=new L.eG(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof L.ic))return!1
z=this.a
y=b.a
if(z==null?y==null:z===y){z=this.b
y=b.b
if(z==null?y==null:z===y)if(J.f(this.c,b.c)){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"SlashDefenseSituation {attacker="+J.v(this.a)+",\nid="+J.v(this.b)+",\ntarget="+H.b(J.v(this.c))+",\ntime="+J.v(this.d)+",\n}"}},
eG:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaJ().c},
gM:function(){return this.gaJ().e},
gaJ:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaJ().b
x=this.gaJ().c
w=this.gaJ().d
v=this.gaJ().e
z=new L.qL(y,x,w,v)
if(y==null)H.n(P.H("attacker"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("target"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,F,{"^":"",pu:{"^":"ag;Z:c<,b,a",
gav:function(){return"swing at <object> (while out of balance)"},
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y
z=this.b
a.bJ(c,"<subject> swing<s> {<subject's> "+a.gap().f+" |}at <object>",z)
y=b.e
C.a.l(y,M.eJ(a,z))
C.a.l(y,L.eH(a,z))
return H.b(a.ch)+" starts an out-of-balance slash at "+H.b(J.C(z))},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
a_:function(a,b){return a.gI()===C.i&&this.b.gI()!==C.m&&a.bd(C.h)},
p:{
xi:[function(a){return new F.pu("It's always better to fight with your feet firmly on the ground. But sometimes, it's necessary to act quickly.",a,null)},"$1","vm",2,0,1]}}}],["","",,M,{"^":"",
eJ:function(a,b){var z=new M.eI(null,null,null,null,null)
new M.ug(a,b).$1(z)
return z.B()},
id:{"^":"b8;",
gbg:function(){return[Y.vi()]},
gm:function(a){return"SlashSituation"},
bj:function(){var z=new M.eI(null,null,null,null,null)
z.a=this
new M.pm().$1(z)
return z.B()},
be:function(a,b){if(a===0)return b.a9(this.a)
return},
br:function(a,b){return new H.Z(a,new M.pn(this),[H.l(a,0)])}},
ug:{"^":"a:0;a,b",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaK().c=z
a.gaK().e=0
z=this.a
z=z.gt(z)
a.gaK().b=z
z=J.M(this.b)
a.gaK().d=z
return a}},
pm:{"^":"a:0;",
$1:function(a){var z=a.gaK().e
if(typeof z!=="number")return z.G()
a.gaK().e=z+1
return a}},
pn:{"^":"a:0;a",
$1:function(a){var z,y
z=J.q(a)
y=this.a
return J.f(z.gt(a),y.a)||J.f(z.gt(a),y.c)}},
qM:{"^":"id;a,t:b>,c,M:d<",
aw:function(a){var z=new M.eI(null,null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof M.id))return!1
z=this.a
y=b.a
if(z==null?y==null:z===y){z=this.b
y=b.b
if(z==null?y==null:z===y)if(J.f(this.c,b.c)){z=this.d
y=b.d
y=z==null?y==null:z===y
z=y}else z=!1
else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)),J.w(this.d)))},
j:function(a){return"SlashSituation {attacker="+J.v(this.a)+",\nid="+J.v(this.b)+",\ntarget="+H.b(J.v(this.c))+",\ntime="+J.v(this.d)+",\n}"}},
eI:{"^":"c;a,b,c,d,e",
gt:function(a){return this.gaK().c},
gM:function(){return this.gaK().e},
gaK:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.e=z.d
this.a=null}return this},
B:function(){var z,y,x,w,v
z=this.a
if(z==null){y=this.gaK().b
x=this.gaK().c
w=this.gaK().d
v=this.gaK().e
z=new M.qM(y,x,w,v)
if(y==null)H.n(P.H("attacker"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("target"))
if(v==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,F,{"^":"",
oF:function(a){var z=new F.eE(null,null,null,null)
new F.uv(a).$1(z)
return z.B()},
i6:{"^":"b8;",
gbg:function(){return[Y.vu()]},
gca:function(){return H.u([],[Q.bg])},
gm:function(a){return"RoomRoamingSituation"},
bj:function(){var z=new F.eE(null,null,null,null)
z.a=this
new F.oG().$1(z)
return z.B()},
be:function(a,b){return b.a.bV(0,new F.oH(),new F.oI())},
br:function(a,b){var z=this.be(null,b)
if(z==null)return[]
return[z]},
hE:function(a,b){a.a.iY(new F.oJ(),!0)},
dQ:function(a){if(J.f(this.a,$.$get$fp().b))return!1
return!0}},
uv:{"^":"a:0;a",
$1:function(a){var z=$.$get$bb().aA(1073741823)
a.gaI().c=z
a.gaI().d=0
z=this.a.b
a.gaI().b=z
return a}},
oG:{"^":"a:0;",
$1:function(a){var z=a.gaI().d
if(typeof z!=="number")return z.G()
a.gaI().d=z+1
return a}},
oH:{"^":"a:0;",
$1:function(a){return a.gS()&&a.gbk()}},
oI:{"^":"a:1;",
$0:function(){return}},
oJ:{"^":"a:0;",
$1:function(a){return!a.gbZ()}},
qK:{"^":"i6;b6:a<,t:b>,M:c<",
aw:function(a){var z=new F.eE(null,null,null,null)
z.a=this
a.$1(z)
return z.B()},
v:function(a,b){var z,y
if(b==null)return!1
if(!(b instanceof F.i6))return!1
if(J.f(this.a,b.a)){z=this.b
y=b.b
if(z==null?y==null:z===y){z=this.c
y=b.c
y=z==null?y==null:z===y
z=y}else z=!1}else z=!1
return z},
gq:function(a){return Y.aR(Y.y(Y.y(Y.y(0,J.w(this.a)),J.w(this.b)),J.w(this.c)))},
j:function(a){return"RoomRoamingSituation {currentRoomName="+H.b(J.v(this.a))+",\nid="+J.v(this.b)+",\ntime="+J.v(this.c)+",\n}"}},
eE:{"^":"c;a,b,c,d",
gb6:function(){return this.gaI().b},
sb6:function(a){this.gaI().b=a
return a},
gt:function(a){return this.gaI().c},
gM:function(){return this.gaI().d},
gaI:function(){var z=this.a
if(z!=null){this.b=z.a
this.c=z.b
this.d=z.c
this.a=null}return this},
B:function(){var z,y,x,w
z=this.a
if(z==null){y=this.gaI().b
x=this.gaI().c
w=this.gaI().d
z=new F.qK(y,x,w)
if(y==null)H.n(P.H("currentRoomName"))
if(x==null)H.n(P.H("id"))
if(w==null)H.n(P.H("time"))}this.a=z
return z}}}],["","",,Y,{"^":"",q9:{"^":"d7;b,a",
ab:[function(a,b,c){throw H.d(new P.aw(null))},"$3","ga6",6,0,0],
ac:[function(a,b,c){var z,y,x,w,v,u,t,s,r,q,p,o
z=b.e
y=z.length!==0?C.a.gw(z):null
x=y.aw(new Y.qa(this))
C.a.eY(z)
C.a.l(z,x)
w=this.b
v=b.fe(w.gho())
for(u=R.ju(a,b),u=P.ac(u,!0,H.E(u,"I",0)),t=u.length,s=b.a,r=0;r<u.length;u.length===t||(0,H.a8)(u),++r){q=b.a9(J.M(u[r]))
p=q.aw(new Y.qb(v))
s.D(0,q)
s.l(0,p)}c.bh(0,"\n\n",!0)
c.l(0,v.gaP())
c.bh(0,"\n\n",!0)
if(v.gkR()!=null){o=v.e.$1(b)
s.K(0,o)
C.a.l(z,U.lZ(new H.Z(s,new Y.qc(a,v),[H.l(s,0)]),o))}return H.b(J.C(a))+" went through exit to "+w.a},"$3","ga7",6,0,0],
a4:function(a,b){return 1},
gZ:function(){return},
a_:function(a,b){return!0},
p:{
xt:[function(a){return new Y.q9(a,null)},"$1","vu",2,0,8]}},qa:{"^":"a:0;a",
$1:function(a){a.sb6(this.a.b.gho())
return a}},qb:{"^":"a:0;a",
$1:function(a){a.sb6(J.C(this.a))
return a}},qc:{"^":"a:0;a,b",
$1:function(a){var z,y
z=a.gag()
y=this.a.gag()
z=z.a
y=y.a
return(z==null?y==null:z===y)&&J.f(a.gb6(),J.C(this.b))}}}],["","",,O,{"^":"",
y3:[function(a){var z,y
z=$.$get$fz()
y=z.a
if(y.length>0){y+=" "
z.a=y}z.a=y+a},"$1","vf",2,0,3],
vy:[function(a){$.fs=a},"$1","vg",2,0,3],
jn:[function(a,b,c,d,e,f,g){var z=L.fR(a,!1,!1,d,e,f,g)
$.$get$cb().l(0,z)
return z},function(a){return O.jn(a,!1,!1,null,null,null,null)},function(a,b,c){return O.jn(a,!1,!1,null,b,c,null)},"$7$deferToChoiceList$deferToEndOfPage$goto$helpMessage$script$submenu","$1","$3$helpMessage$script","ve",2,13,10,0,0,0,1,1,0]}],["","",,N,{"^":"",et:{"^":"c;m:a>,b,c,iQ:d>,a8:e>,f",
ghs:function(){var z,y,x
z=this.b
y=z==null||J.f(J.C(z),"")
x=this.a
return y?x:z.ghs()+"."+x},
geL:function(){if($.ft){var z=this.b
if(z!=null)return z.geL()}return $.ja},
kL:function(a,b,c,d,e){var z,y,x,w,v,u,t,s,r,q,p,o
x=a.b
if(x>=this.geL().b){if(!!J.k(b).$isbv)b=b.$0()
w=b
if(typeof w!=="string"){v=b
b=J.v(b)}else v=null
if(d==null&&x>=$.jC.b)try{x="autogenerated stack trace for "+a.j(0)+" "+H.b(b)
throw H.d(x)}catch(u){x=H.F(u)
z=x
y=H.Q(u)
d=y
if(c==null)c=z}e=$.i
x=b
w=this.ghs()
t=c
s=d
r=Date.now()
q=$.es
$.es=q+1
p=new N.nH(a,x,v,w,new P.bU(r,!1),q,t,s,e)
if($.ft)for(o=this;o!=null;){o.fX(p)
o=o.b}else $.$get$hI().fX(p)}},
ce:function(a,b,c,d){return this.kL(a,b,c,d,null)},
kj:function(a,b,c){return this.ce(C.ah,a,b,c)},
U:function(a){return this.kj(a,null,null)},
ki:function(a,b,c){return this.ce(C.ag,a,b,c)},
aW:function(a){return this.ki(a,null,null)},
kh:function(a,b,c){return this.ce(C.ai,a,b,c)},
dm:function(a){return this.kh(a,null,null)},
kw:function(a,b,c){return this.ce(C.C,a,b,c)},
kv:function(a){return this.kw(a,null,null)},
ln:function(a,b,c){return this.ce(C.al,a,b,c)},
hS:function(a){return this.ln(a,null,null)},
i6:function(a,b,c){return this.ce(C.ak,a,b,c)},
i5:function(a){return this.i6(a,null,null)},
fX:function(a){},
p:{
bY:function(a){return $.$get$hH().eU(0,a,new N.ux(a))}}},ux:{"^":"a:1;a",
$0:function(){var z,y,x,w
z=this.a
if(C.b.cj(z,"."))H.n(P.X("name shouldn't start with a '.'"))
y=C.b.hz(z,".")
if(y===-1)x=z!==""?N.bY(""):null
else{x=N.bY(C.b.a5(z,0,y))
z=C.b.bt(z,y+1)}w=new H.a_(0,null,null,null,null,null,0,[P.h,N.et])
w=new N.et(z,x,null,w,new P.qw(w,[null,null]),null)
if(x!=null)J.jP(x).k(0,z,w)
return w}},nH:{"^":"c;eL:a<,b,aU:c<,d,M:e<,f,bD:r>,b2:x<,y",
j:function(a){return"["+this.a.a+"] "+this.d+": "+H.b(this.b)}}}],["","",,X,{"^":"",
am:function(a){return X.c7(J.jO(a,0,new X.uJ()))},
aH:function(a,b){var z=J.R(a,b)
if(typeof z!=="number")return H.o(z)
a=536870911&z
a=536870911&a+((524287&a)<<10)
return a^a>>>6},
c7:function(a){if(typeof a!=="number")return H.o(a)
a=536870911&a+((67108863&a)<<3)
a^=a>>>11
return 536870911&a+((16383&a)<<15)},
uJ:{"^":"a:3;",
$2:function(a,b){return X.aH(a,J.w(b))}}}]]
setupProgram(dart,init.types.length)
var deferredTypes=[{func:1,ret:P.h,args:[R.a5,A.ba,Y.bm]},{func:1,ret:Q.ag,args:[R.a5]},{func:1,ret:Y.bW,args:[P.t]},{func:1,v:true,args:[P.h]},{func:1,ret:P.h,args:[P.t]},{func:1,ret:P.T,args:[R.a5,A.ba]},{func:1,ret:P.t,args:[R.a5]},{func:1,ret:P.T,args:[P.T,P.T]},{func:1,ret:Q.d7,args:[Q.bu]},{func:1,ret:[P.a6,P.au]},{func:1,ret:L.ah,args:[P.h],named:{deferToChoiceList:P.U,deferToEndOfPage:P.U,goto:P.h,helpMessage:P.h,script:{func:1,ret:[P.a6,P.au]},submenu:P.h}}]
init.types.push.apply(init.types,deferredTypes)
C.X=new P.rC()
C.a1=new U.d9(0)
C.a2=new U.d9(1)
C.a3=new U.d9(2)
C.h=new U.d9(3)
C.B=new O.hB(0)
C.af=new O.hB(1)
C.ag=new N.b4("FINER",400)
C.ah=new N.b4("FINEST",300)
C.ai=new N.b4("FINE",500)
C.aj=new N.b4("OFF",2000)
C.ap=new H.eh([0,"ItemType.spear",1,"ItemType.branch",2,"ItemType.tent",3,"ItemType.sword"],[null,null])
C.aq=new H.eh([0,"KnownToMode.all",1,"KnownToMode.protagonistOnly",2,"KnownToMode.custom"],[null,null])
C.F=new H.eh([0,"Pose.standing",1,"Pose.offBalance",2,"Pose.onGround"],[null,null])
C.c=new R.eA(0)
C.i=new R.eA(1)
C.m=new R.eA(2)
C.H=new Y.cy("he","him","his","himself")
C.l=new Y.cy("it","it","its","itself")
C.ar=new Y.cy("she","her","her","herself")
C.as=new Y.cy("they","them","their","themselves")
C.I=new Y.cy("you","you","your","yourself")
C.o=H.af("dynamic")
C.aM=new P.c4(null,2)
$.ft=!1
$.jC=C.aj
$.ja=C.C
$.es=0;(function(a){for(var z=0;z<a.length;){var y=a[z++]
var x=a[z++]
var w=a[z++]
var v=a[z++]
I.$lazy(y,x,w,null,v)}})(["e4","$get$e4",function(){return P.ll()},$,"hY","$get$hY",function(){return N.bY("PlannerRecommendation")},$,"fp","$get$fp",function(){return K.oE("__END_OF_ROAM__","","",null,null,[])},$,"bb","$get$bb",function(){return P.eC(null)},$,"bA","$get$bA",function(){return P.eC(null)},$,"il","$get$il",function(){return P.G("(\\w)([\\.\\?\\!])([\"'])\\.(?=$|\\s)",!0,!1)},$,"fo","$get$fo",function(){return L.eV(new L.uu())},$,"bf","$get$bf",function(){return L.eV(new L.ut())},$,"dU","$get$dU",function(){return L.eV(new L.uw())},$,"j8","$get$j8",function(){return P.eC(null)},$,"fk","$get$fk",function(){return Y.hd(!1,"balance",!0,C.l,$.$get$bf())},$,"i9","$get$i9",function(){return new O.oS(null,null)},$,"ii","$get$ii",function(){return new Q.pq(null,null)},$,"jG","$get$jG",function(){return Y.hd(!1,"swing",!0,C.l,$.$get$bf())},$,"ey","$get$ey",function(){return new F.oc("Sometimes, patience pays off. Especially when the other option is potentially dangerous.",null)},$,"i5","$get$i5",function(){return new B.oA("Most moves are easier and more effective when you are firmly in balance.",null)},$,"hI","$get$hI",function(){return N.bY("")},$,"hH","$get$hH",function(){return P.ao(P.h,N.et)},$])}
$dart_deferred_initializers$["jcpuCyAfxzS3WAVE2sjgYAoOy2k="]=$dart_deferred_initializers$.current
